cscope 15 c:/sfTrunk/orkbasecxx/filters/gsm/gsm610               0000076221
	@add.c

11 
	~<°dio.h
>

12 
	~<as£π.h
>

14 
	~"gsm610_¥iv.h
"

15 
	~"gsm.h
"

17 
	#ßtuøã
(
x
) \

18 ((
x
Ë< 
MIN_WORD
 ? MIN_WORD : (xË> 
MAX_WORD
 ? MAX_WORD: (x))

	)

20 
w‹d
 
	$gsm_add
 ( 
w‹d
 
a
, w‹d 
b
)

22 
l⁄gw‹d
 
sum
 = (l⁄gw‹d)
a
 + (l⁄gw‹d)
b
;

23  
	`ßtuøã
(
sum
);

24 
	}
}

26 
w‹d
 
	$gsm_sub
 ( 
w‹d
 
a
, w‹d 
b
)

28 
l⁄gw‹d
 
diff
 = (l⁄gw‹d)
a
 - (l⁄gw‹d)
b
;

29  
	`ßtuøã
(
diff
);

30 
	}
}

32 
w‹d
 
	$gsm_mu…
 ( 
w‹d
 
a
, w‹d 
b
)

34 i‡(
a
 =
MIN_WORD
 && 
b
 == MIN_WORD)

35  
MAX_WORD
;

37  
	`SASR_L
–(
l⁄gw‹d
)
a
 * (l⁄gw‹d)
b
, 15 );

38 
	}
}

40 
w‹d
 
	$gsm_mu…_r
 ( 
w‹d
 
a
, w‹d 
b
)

42 i‡(
b
 =
MIN_WORD
 && 
a
 =MIN_WORDË 
MAX_WORD
;

44 
l⁄gw‹d
 
¥od
 = (l⁄gw‹d)
a
 * (l⁄gw‹d)
b
 + 16384;

45 
¥od
 >>= 15;

46  
¥od
 & 0xFFFF;

48 
	}
}

50 
w‹d
 
	$gsm_abs
 (
w‹d
 
a
)

52  
a
 < 0 ? (®=
MIN_WORD
 ? 
MAX_WORD
 : -a) :á;

53 
	}
}

55 
l⁄gw‹d
 
	$gsm_L_mu…
 (
w‹d
 
a
, w‹d 
b
)

57 
	`as£π
–
a
 !
MIN_WORD
 || 
b
 != MIN_WORD );

58  ((
l⁄gw‹d
)
a
 * (l⁄gw‹d)
b
) << 1;

59 
	}
}

61 
l⁄gw‹d
 
	$gsm_L_add
 ( 
l⁄gw‹d
 
a
,Ü⁄gw‹d 
b
)

63 i‡(
a
 < 0) {

64 i‡(
b
 >0Ë 
a
 + b;

66 
ul⁄gw‹d
 
A
 = (ul⁄gw‹d)-(
a
 + 1Ë+ (ul⁄gw‹d)-(
b
 + 1);

67  
A
 >
MAX_LONGWORD
 ? 
MIN_LONGWORD
 :-(
l⁄gw‹d
)A-2;

70 i‡(
b
 <0Ë 
a
 + b;

72 
ul⁄gw‹d
 
A
 = (ul⁄gw‹d)
a
 + (ul⁄gw‹d)
b
;

73  
A
 > 
MAX_LONGWORD
 ? MAX_LONGWORD : A;

75 
	}
}

77 
l⁄gw‹d
 
	$gsm_L_sub
 ( 
l⁄gw‹d
 
a
,Ü⁄gw‹d 
b
)

79 i‡(
a
 >= 0) {

80 i‡(
b
 >0Ë 
a
 - b;

84 
ul⁄gw‹d
 
A
 = (ul⁄gw‹d)
a
 + -(
b
 + 1);

85  
A
 >
MAX_LONGWORD
 ? MAX_LONGWORD : (A + 1);

88 i‡(
b
 <0Ë 
a
 - b;

92 
ul⁄gw‹d
 
A
 = (ul⁄gw‹d)-(
a
 + 1Ë+ 
b
;

93  
A
 >
MAX_LONGWORD
 ? 
MIN_LONGWORD
 : -(
l⁄gw‹d
)A - 1;

95 
	}
}

97 c⁄° 
	gbôoff
[ 256 ] = {

116 
w‹d
 
	$gsm_n‹m
 (
l⁄gw‹d
 
a
 )

136 
	`as£π
(
a
 != 0);

138 i‡(
a
 < 0) {

139 i‡(
a
 <= -1073741824)  0;

140 
a
 = ~a;

143  
a
 & 0xffff0000

144 ? ( 
a
 & 0xff000000

145 ? -1 + 
bôoff
[ 0xFF & (
a
 >> 24) ]

146 : 7 + 
bôoff
[ 0xFF & (
a
 >> 16) ] )

147 : ( 
a
 & 0xff00

148 ? 15 + 
bôoff
[ 0xFF & (
a
 >> 8) ]

149 : 23 + 
bôoff
[ 0xFF & 
a
 ] );

150 
	}
}

152 
l⁄gw‹d
 
	$gsm_L_a¶
 (
l⁄gw‹d
 
a
, 
n
)

154 i‡(
n
 >= 32)  0;

155 i‡(
n
 <-32Ë -(
a
 < 0);

156 i‡(
n
 < 0Ë 
	`gsm_L_a§
(
a
, -n);

157  
a
 << 
n
;

158 
	}
}

160 
w‹d
 
	$gsm_a§
 (
w‹d
 
a
, 
n
)

162 i‡(
n
 >16Ë -(
a
 < 0);

163 i‡(
n
 <= -16)  0;

164 i‡(
n
 < 0Ë 
a
 << -n;

166  
	`SASR_W
 (
a
, (
w‹d
Ë
n
);

167 
	}
}

169 
w‹d
 
	$gsm_a¶
 (
w‹d
 
a
, 
n
)

171 i‡(
n
 >= 16)  0;

172 i‡(
n
 <-16Ë -(
a
 < 0);

173 i‡(
n
 < 0Ë 
	`gsm_a§
(
a
, -n);

174  
a
 << 
n
;

175 
	}
}

177 
l⁄gw‹d
 
	$gsm_L_a§
 (
l⁄gw‹d
 
a
, 
n
)

179 i‡(
n
 >32Ë -(
a
 < 0);

180 i‡(
n
 <= -32)  0;

181 i‡(
n
 < 0Ë 
a
 << -n;

183  
	`SASR_L
 (
a
, (
w‹d
Ë
n
);

184 
	}
}

211 
w‹d
 
	$gsm_div
 (
w‹d
 
num
, w‹d 
díum
)

213 
l⁄gw‹d
 
L_num
 = 
num
;

214 
l⁄gw‹d
 
L_díum
 = 
díum
;

215 
w‹d
 
div
 = 0;

216 
k
 = 15;

225 
	`as£π
(
num
 >0 && 
díum
 >=Çum);

226 i‡(
num
 == 0)

229 
k
--) {

230 
div
 <<= 1;

231 
L_num
 <<= 1;

233 i‡(
L_num
 >
L_díum
) {

234 
L_num
 -
L_díum
;

235 
div
++;

239  
div
;

240 
	}
}

	@code.c

8 
	~<°dlib.h
>

9 
	~<°rög.h
>

11 
	~"c⁄fig.h
"

13 
	~"gsm610_¥iv.h
"

14 
	~"gsm.h
"

20 
	$Gsm_Codî
 (

22 
gsm_°©e
 * 
Sèã
,

24 
w‹d
 * 
s
,

36 
w‹d
 * 
LARc
,

44 
w‹d
 * 
Nc
,

45 
w‹d
 * 
bc
,

46 
w‹d
 * 
Mc
,

47 
w‹d
 * 
xmaxc
,

48 
w‹d
 * 
xMc


51 
k
;

52 
w‹d
 * 
dp
 = 
Sèã
->
dp0
 + 120;

53 
w‹d
 * 
dµ
 = 
dp
;

55 
w‹d
 
so
[160];

57 
	`Gsm_Pª¥o˚ss
 (
Sèã
, 
s
, 
so
);

58 
	`Gsm_LPC_A«lysis
 (
Sèã
, 
so
, 
LARc
);

59 
	`Gsm_Sh‹t_Tîm_A«lysis_Fûãr
 (
Sèã
, 
LARc
, 
so
);

61 
k
 = 0; k <3; k++, 
xMc
 += 13) {

63 
	`Gsm_L⁄g_Tîm_Pªdi˘‹
 ( 
Sèã
,

64 
so
+
k
*40,

65 
dp
,

66 
Sèã
->
e
 + 5,

67 
dµ
,

68 
Nc
++,

69 
bc
++);

71 
	`Gsm_RPE_Encodög
 (

72 
Sèã
->
e
 + 5,

73 
xmaxc
++, 
Mc
++, 
xMc
 );

79 { 
i
;

80 
i
 = 0; i <= 39; i++)

81 
dp
[ 
i
 ] = 
	`GSM_ADD
–
Sèã
->
e
[5 + i], 
dµ
[i] );

83 
dp
 += 40;

84 
dµ
 += 40;

87 ()
	`mem˝y
–(*)
Sèã
->
dp0
, (*)(State->dp0 + 160),

88 120 * (*
Sèã
->
dp0
) );

89 
	}
}

	@config.h

7 #i‚def 
CONFIG_H


8 
	#CONFIG_H


	)

10 
	#HAS_STDLIB_H
 1

	)

11 
	#HAS_FCNTL_H
 1

	)

13 
	#HAS_FSTAT
 1

	)

14 
	#HAS_FCHMOD
 1

	)

15 
	#HAS_CHMOD
 1

	)

16 
	#HAS_FCHOWN
 1

	)

17 
	#HAS_CHOWN
 1

	)

19 
	#HAS_STRING_H
 1

	)

21 
	#HAS_UNISTD_H
 1

	)

22 
	#HAS_UTIME
 1

	)

23 
	#HAS_UTIME_H
 1

	)

	@decode.c

7 
	~<°dio.h
>

9 
	~"gsm610_¥iv.h
"

10 
	~"gsm.h
"

16 
	$Po°¥o˚ssög
 (

17 
gsm_°©e
 * 
S
,

18 
w‹d
 * 
s
)

20 
k
;

21 
w‹d
 
m§
 = 
S
->msr;

22 
w‹d
 
tmp
;

24 
k
 = 160; k--; 
s
++) {

25 
tmp
 = 
	`GSM_MULT_R
–
m§
, 28180 );

26 
m§
 = 
	`GSM_ADD
(*
s
, 
tmp
);

27 *
s
 = 
	`GSM_ADD
(
m§
, msr) & 0xFFF8;

29 
S
->
m§
 = msr;

30 
	}
}

32 
	$Gsm_Decodî
 (

33 
gsm_°©e
 * 
S
,

35 
w‹d
 * 
LAR¸
,

37 
w‹d
 * 
N¸
,

38 
w‹d
 * 
b¸
,

39 
w‹d
 * 
M¸
,

40 
w‹d
 * 
xmax¸
,

41 
w‹d
 * 
xM¸
,

43 
w‹d
 * 
s
)

45 
j
, 
k
;

46 
w‹d
 
îp
[40], 
wt
[160];

47 
w‹d
 * 
dΩ
 = 
S
->
dp0
 + 120;

49 
j
=0; j <3; j++, 
xmax¸
++, 
b¸
++, 
N¸
++, 
M¸
++, 
xM¸
 += 13) {

51 
	`Gsm_RPE_Decodög
– *
xmax¸
, *
M¸
, 
xM¸
, 
îp
 );

52 
	`Gsm_L⁄g_Tîm_Sy¡hesis_Fûãrög
–
S
, *
N¸
, *
b¸
, 
îp
, 
dΩ
 );

54 
k
 = 0; k <39; k++Ë
wt
[ 
j
 * 40 + k ] = 
dΩ
[ k ];

57 
	`Gsm_Sh‹t_Tîm_Sy¡hesis_Fûãr
–
S
, 
LAR¸
, 
wt
, 
s
 );

58 
	`Po°¥o˚ssög
(
S
, 
s
);

59 
	}
}

	@gsm.h

7 #i‚def 
GSM_H


8 
	#GSM_H


	)

10 
	~<°dio.h
>

16 
gsm_°©e
 * 
	tgsm
;

17 
	tgsm_sig«l
;

18 
	tgsm_byã
;

19 
gsm_byã
 
	tgsm_‰ame
[33];

21 
	#GSM_MAGIC
 0xD

	)

23 
	#GSM_PATCHLEVEL
 10

	)

24 
	#GSM_MINOR
 0

	)

25 
	#GSM_MAJOR
 1

	)

27 
	#GSM_OPT_VERBOSE
 1

	)

28 
	#GSM_OPT_FAST
 2

	)

29 
	#GSM_OPT_LTP_CUT
 3

	)

30 
	#GSM_OPT_WAV49
 4

	)

31 
	#GSM_OPT_FRAME_INDEX
 5

	)

32 
	#GSM_OPT_FRAME_CHAIN
 6

	)

34 
gsm
 
gsm_¸óã
 ();

37 
gsm_öô
 (
gsm
);

39 
gsm_de°roy
 (
gsm
);

41 
gsm_¥öt
 (
FILE
 *, 
gsm
, 
gsm_byã
 *);

42 
gsm_›ti⁄
 (
gsm
, , *);

44 
gsm_ícode
 (
gsm
, 
gsm_sig«l
 *, 
gsm_byã
 *);

45 
gsm_decode
 (
gsm
, 
gsm_byã
 *, 
gsm_sig«l
 *);

47 
gsm_ex∂ode
 (
gsm
, 
gsm_byã
 *, 
gsm_sig«l
 *);

48 
gsm_im∂ode
 (
gsm
, 
gsm_sig«l
 *, 
gsm_byã
 *);

	@gsm610_priv.h

7 #i‚def 
PRIVATE_H


8 
	#PRIVATE_H


	)

11 
	#USE_FLOAT_MUL


	)

12 
	#FAST


	)

13 
	#WAV49


	)

18 
	tw‹d
;

19 
	tl⁄gw‹d
;

21 
	tuw‹d
;

22 
	tul⁄gw‹d
;

24 
	sgsm_°©e


25 { 
w‹d
 
	mdp0
[ 280 ] ;

27 
w‹d
 
	mz1
;

28 
l⁄gw‹d
 
	mL_z2
;

29 
	mmp
;

31 
w‹d
 
	mu
[8] ;

32 
w‹d
 
	mLARµ
[2][8] ;

33 
w‹d
 
	mj
;

35 
w‹d
 
	m…p_cut
;

36 
w‹d
 
	mƒp
;

37 
w‹d
 
	mv
[9] ;

38 
w‹d
 
	mm§
;

40 
	mvîbo£
;

41 
	mÁ°
;

43 
	mwav_fmt
;

44 
	m‰ame_ödex
;

45 
	m‰ame_chaö
;

48 
w‹d
 
	me
[50] ;

51 
gsm_°©e
 
	tGSM_STATE
 ;

53 
	#MIN_WORD
 (-32767 - 1)

	)

54 
	#MAX_WORD
 32767

	)

56 
	#MIN_LONGWORD
 (-2147483647 - 1)

	)

57 
	#MAX_LONGWORD
 2147483647

	)

60 
ölöe
 
w‹d


61 
	$SASR_W
 (
w‹d
 
x
, w‹d 
by
)

62 {  (
x
 >> 
by
) ;

63 
	}
}

65 
ölöe
 
l⁄gw‹d


66 
	$SASR_L
 (
l⁄gw‹d
 
x
, 
w‹d
 
by
)

67 {  (
x
 >> 
by
) ;

68 
	}
}

73 
w‹d
 
gsm_mu…
 (w‹d 
a
, w‹d 
b
) ;

74 
l⁄gw‹d
 
gsm_L_mu…
 (
w‹d
 
a
, w‹d 
b
) ;

75 
w‹d
 
gsm_mu…_r
 (w‹d 
a
, w‹d 
b
) ;

77 
w‹d
 
gsm_div
 (w‹d 
num
, w‹d 
díum
) ;

79 
w‹d
 
gsm_add
 (w‹d 
a
, w‹d 
b
 ) ;

80 
l⁄gw‹d
 
gsm_L_add
 (l⁄gw‹d 
a
,Ü⁄gw‹d 
b
 ) ;

82 
w‹d
 
gsm_sub
 (w‹d 
a
, w‹d 
b
) ;

83 
l⁄gw‹d
 
gsm_L_sub
 (l⁄gw‹d 
a
,Ü⁄gw‹d 
b
) ;

85 
w‹d
 
gsm_abs
 (w‹d 
a
) ;

87 
w‹d
 
gsm_n‹m
 (
l⁄gw‹d
 
a
 ) ;

89 
l⁄gw‹d
 
gsm_L_a¶
 (l⁄gw‹d 
a
, 
n
) ;

90 
w‹d
 
gsm_a¶
 (w‹d 
a
, 
n
) ;

92 
l⁄gw‹d
 
gsm_L_a§
 (l⁄gw‹d 
a
, 
n
) ;

93 
w‹d
 
gsm_a§
 (w‹d 
a
, 
n
) ;

99 
ölöe
 
l⁄gw‹d


100 
	$GSM_MULT_R
 (
w‹d
 
a
, w‹d 
b
)

101 {  (((
l⁄gw‹d
Ë(
a
)Ë* (÷⁄gw‹dË(
b
)) + 16384) >> 15 ;

102 
	}
}

104 
ölöe
 
l⁄gw‹d


105 
	$GSM_MULT
 (
w‹d
 
a
, w‹d 
b
)

106 {  (((
l⁄gw‹d
Ë(
a
)Ë* (÷⁄gw‹dË(
b
))) >> 15 ;

107 
	}
}

109 
ölöe
 
l⁄gw‹d


110 
	$GSM_L_MULT
 (
w‹d
 
a
, w‹d 
b
)

111 {  ((
l⁄gw‹d
Ë(
a
)Ë* (÷⁄gw‹dË(
b
)) << 1 ;

112 
	}
}

114 
ölöe
 
l⁄gw‹d


115 
	$GSM_L_ADD
 (
l⁄gw‹d
 
a
,Ü⁄gw‹d 
b
)

116 { 
ul⁄gw‹d
 
utmp
 ;

118 i‡(
a
 < 0 && 
b
 < 0)

119 { 
utmp
 = (
ul⁄gw‹d
)-((
a
Ë+ 1Ë+ (ul⁄gw‹d)-((
b
) + 1) ;

120  (
utmp
 >(
ul⁄gw‹d
Ë
MAX_LONGWORD
Ë? 
MIN_LONGWORD
 : -(
l⁄gw‹d
)utmp-2 ;

123 i‡(
a
 > 0 && 
b
 > 0)

124 { 
utmp
 = (
ul⁄gw‹d
Ë
a
 + (ul⁄gw‹dË
b
 ;

125  (
utmp
 >(
ul⁄gw‹d
Ë
MAX_LONGWORD
) ? MAX_LONGWORD : utmp ;

128  
a
 + 
b
 ;

129 
	}
}

131 
ölöe
 
l⁄gw‹d


132 
	$GSM_ADD
 (
w‹d
 
a
, w‹d 
b
)

133 { 
l⁄gw‹d
 
…mp
 ;

135 
…mp
 = ((
l⁄gw‹d
Ë
a
Ë+ (÷⁄gw‹dË
b
) ;

137 i‡(
…mp
 >
MAX_WORD
)

138  
MAX_WORD
 ;

139 i‡(
…mp
 <
MIN_WORD
)

140  
MIN_WORD
 ;

142  
…mp
 ;

143 
	}
}

145 
ölöe
 
l⁄gw‹d


146 
	$GSM_SUB
 (
w‹d
 
a
, w‹d 
b
)

147 { 
l⁄gw‹d
 
…mp
 ;

149 
…mp
 = ((
l⁄gw‹d
Ë
a
Ë- (÷⁄gw‹dË
b
) ;

151 i‡(
…mp
 >
MAX_WORD
)

152 
…mp
 = 
MAX_WORD
 ;

153 i‡(
…mp
 <
MIN_WORD
)

154 
…mp
 = 
MIN_WORD
 ;

156  
…mp
 ;

157 
	}
}

159 
ölöe
 
w‹d


160 
	$GSM_ABS
 (
w‹d
 
a
)

162 i‡(
a
 > 0)

163  
a
 ;

164 i‡(
a
 =
MIN_WORD
)

165  
MAX_WORD
 ;

166  -
a
 ;

167 
	}
}

173 
Gsm_Codî
 (

174 
gsm_°©e
 * 
S
,

175 
w‹d
 * 
s
,

176 
w‹d
 * 
LARc
,

177 
w‹d
 * 
Nc
,

178 
w‹d
 * 
bc
,

179 
w‹d
 * 
Mc
,

180 
w‹d
 * 
xmaxc
,

181 
w‹d
 * 
xMc
) ;

183 
Gsm_L⁄g_Tîm_Pªdi˘‹
 (

184 
gsm_°©e
 * 
S
,

185 
w‹d
 * 
d
,

186 
w‹d
 * 
dp
,

187 
w‹d
 * 
e
,

188 
w‹d
 * 
dµ
,

189 
w‹d
 * 
Nc
,

190 
w‹d
 * 
bc
) ;

192 
Gsm_LPC_A«lysis
 (

193 
gsm_°©e
 * 
S
,

194 
w‹d
 * 
s
,

195 
w‹d
 * 
LARc
) ;

197 
Gsm_Pª¥o˚ss
 (

198 
gsm_°©e
 * 
S
,

199 
w‹d
 * 
s
, w‹d * 
so
) ;

201 
Gsm_Encodög
 (

202 
gsm_°©e
 * 
S
,

203 
w‹d
 * 
e
,

204 
w‹d
 * 
ï
,

205 
w‹d
 * 
xmaxc
,

206 
w‹d
 * 
Mc
,

207 
w‹d
 * 
xMc
) ;

209 
Gsm_Sh‹t_Tîm_A«lysis_Fûãr
 (

210 
gsm_°©e
 * 
S
,

211 
w‹d
 * 
LARc
,

212 
w‹d
 * 
d
) ;

214 
Gsm_Decodî
 (

215 
gsm_°©e
 * 
S
,

216 
w‹d
 * 
LAR¸
,

217 
w‹d
 * 
N¸
,

218 
w‹d
 * 
b¸
,

219 
w‹d
 * 
M¸
,

220 
w‹d
 * 
xmax¸
,

221 
w‹d
 * 
xM¸
,

222 
w‹d
 * 
s
) ;

224 
Gsm_Decodög
 (

225 
gsm_°©e
 * 
S
,

226 
w‹d
 
xmax¸
,

227 
w‹d
 
M¸
,

228 
w‹d
 * 
xM¸
,

229 
w‹d
 * 
îp
) ;

231 
Gsm_L⁄g_Tîm_Sy¡hesis_Fûãrög
 (

232 
gsm_°©e
* 
S
,

233 
w‹d
 
N¸
,

234 
w‹d
 
b¸
,

235 
w‹d
 * 
îp
,

236 
w‹d
 * 
dΩ
) ;

238 
Gsm_RPE_Decodög
 (

240 
w‹d
 
xmax¸
,

241 
w‹d
 
M¸
,

242 
w‹d
 * 
xM¸
,

243 
w‹d
 * 
îp
) ;

245 
Gsm_RPE_Encodög
 (

247 
w‹d
 * 
e
,

248 
w‹d
 * 
xmaxc
,

249 
w‹d
 * 
Mc
,

250 
w‹d
 * 
xMc
) ;

252 
Gsm_Sh‹t_Tîm_Sy¡hesis_Fûãr
 (

253 
gsm_°©e
 * 
S
,

254 
w‹d
 * 
LAR¸
,

255 
w‹d
 * 
dΩ
,

256 
w‹d
 * 
s
) ;

258 
Gsm_Upd©e_of_ªc⁄°ru˘ed_sh‹t_time_ªsiduÆ_sig«l
 (

259 
w‹d
 * 
dµ
,

260 
w‹d
 * 
ï
,

261 
w‹d
 * 
dp
) ;

266 #i‚def 
GSM_TABLE_C


268 
w‹d
 
gsm_A
 [8], 
gsm_B
 [8], 
gsm_MIC
 [8], 
gsm_MAC
 [8] ;

269 
w‹d
 
gsm_INVA
 [8] ;

270 
w‹d
 
gsm_DLB
 [4], 
gsm_QLB
 [4] ;

271 
w‹d
 
gsm_H
 [11] ;

272 
w‹d
 
gsm_NRFAC
 [8] ;

273 
w‹d
 
gsm_FAC
 [8] ;

280 #ifde‡
NDEBUG


282 
	#gsm_debug_w‹ds
(
a
, 
b
, 
c
, 
d
Ë

	)

283 
	#gsm_debug_l⁄gw‹ds
(
a
, 
b
, 
c
, 
d
Ë

	)

284 
	#gsm_debug_w‹d
(
a
, 
b
Ë

	)

285 
	#gsm_debug_l⁄gw‹d
(
a
, 
b
Ë

	)

289 
gsm_debug_w‹ds
 (* 
«me
, , , 
w‹d
 *) ;

290 
gsm_debug_l⁄gw‹ds
 (* 
«me
, , , 
l⁄gw‹d
 *) ;

291 
gsm_debug_l⁄gw‹d
 (* 
«me
, 
l⁄gw‹d
) ;

292 
gsm_debug_w‹d
 (* 
«me
, 
w‹d
) ;

	@gsm_create.c

7 
	~"c⁄fig.h
"

9 
	~<°dio.h
>

10 
	~<°dlib.h
>

11 
	~<°rög.h
>

15 
	~"gsm.h
"

16 
	~"gsm610_¥iv.h
"

18 
gsm
 
	$gsm_¸óã
 ()

20 
gsm
 
r
;

22 
r
 = 
	`mÆloc
 ((
gsm_°©e
));

23 i‡(!
r
) Ñ;

25 
	`mem£t
((*)
r
, 0,  (
gsm_°©e
));

26 
r
->
ƒp
 = 40;

28  
r
;

29 
	}
}

32 
	$gsm_öô
 (
gsm
 
°©e
)

34 
	`mem£t
 (
°©e
, 0,  (
gsm_°©e
)) ;

35 
°©e
->
ƒp
 = 40 ;

36 
	}
}

	@gsm_decode.c

7 
	~"gsm610_¥iv.h
"

9 
	~"gsm.h
"

11 
	$gsm_decode
 (
gsm
 
s
, 
gsm_byã
 * 
c
, 
gsm_sig«l
 * 
èrgë
)

13 
w‹d
 
LARc
[8], 
Nc
[4], 
Mc
[4], 
bc
[4], 
xmaxc
[4], 
xmc
[13*4];

15 #ifde‡
WAV49


16 i‡(
s
->
wav_fmt
) {

18 
uw‹d
 
§
 = 0;

20 
s
->
‰ame_ödex
 = !s->frame_index;

21 i‡(
s
->
‰ame_ödex
) {

23 
§
 = *
c
++;

24 
LARc
[0] = 
§
 & 0x3f; sr >>= 6;

25 
§
 |(
uw‹d
)*
c
++ << 2;

26 
LARc
[1] = 
§
 & 0x3f; sr >>= 6;

27 
§
 |(
uw‹d
)*
c
++ << 4;

28 
LARc
[2] = 
§
 & 0x1f; sr >>= 5;

29 
LARc
[3] = 
§
 & 0x1f; sr >>= 5;

30 
§
 |(
uw‹d
)*
c
++ << 2;

31 
LARc
[4] = 
§
 & 0xf; sr >>= 4;

32 
LARc
[5] = 
§
 & 0xf; sr >>= 4;

33 
§
 |(
uw‹d
)*
c
++ << 2;

34 
LARc
[6] = 
§
 & 0x7; sr >>= 3;

35 
LARc
[7] = 
§
 & 0x7; sr >>= 3;

36 
§
 |(
uw‹d
)*
c
++ << 4;

37 
Nc
[0] = 
§
 & 0x7f; sr >>= 7;

38 
bc
[0] = 
§
 & 0x3; sr >>= 2;

39 
Mc
[0] = 
§
 & 0x3; sr >>= 2;

40 
§
 |(
uw‹d
)*
c
++ << 1;

41 
xmaxc
[0] = 
§
 & 0x3f; sr >>= 6;

42 
xmc
[0] = 
§
 & 0x7; sr >>= 3;

43 
§
 = *
c
++;

44 
xmc
[1] = 
§
 & 0x7; sr >>= 3;

45 
xmc
[2] = 
§
 & 0x7; sr >>= 3;

46 
§
 |(
uw‹d
)*
c
++ << 2;

47 
xmc
[3] = 
§
 & 0x7; sr >>= 3;

48 
xmc
[4] = 
§
 & 0x7; sr >>= 3;

49 
xmc
[5] = 
§
 & 0x7; sr >>= 3;

50 
§
 |(
uw‹d
)*
c
++ << 1;

51 
xmc
[6] = 
§
 & 0x7; sr >>= 3;

52 
xmc
[7] = 
§
 & 0x7; sr >>= 3;

53 
xmc
[8] = 
§
 & 0x7; sr >>= 3;

54 
§
 = *
c
++;

55 
xmc
[9] = 
§
 & 0x7; sr >>= 3;

56 
xmc
[10] = 
§
 & 0x7; sr >>= 3;

57 
§
 |(
uw‹d
)*
c
++ << 2;

58 
xmc
[11] = 
§
 & 0x7; sr >>= 3;

59 
xmc
[12] = 
§
 & 0x7; sr >>= 3;

60 
§
 |(
uw‹d
)*
c
++ << 4;

61 
Nc
[1] = 
§
 & 0x7f; sr >>= 7;

62 
bc
[1] = 
§
 & 0x3; sr >>= 2;

63 
Mc
[1] = 
§
 & 0x3; sr >>= 2;

64 
§
 |(
uw‹d
)*
c
++ << 1;

65 
xmaxc
[1] = 
§
 & 0x3f; sr >>= 6;

66 
xmc
[13] = 
§
 & 0x7; sr >>= 3;

67 
§
 = *
c
++;

68 
xmc
[14] = 
§
 & 0x7; sr >>= 3;

69 
xmc
[15] = 
§
 & 0x7; sr >>= 3;

70 
§
 |(
uw‹d
)*
c
++ << 2;

71 
xmc
[16] = 
§
 & 0x7; sr >>= 3;

72 
xmc
[17] = 
§
 & 0x7; sr >>= 3;

73 
xmc
[18] = 
§
 & 0x7; sr >>= 3;

74 
§
 |(
uw‹d
)*
c
++ << 1;

75 
xmc
[19] = 
§
 & 0x7; sr >>= 3;

76 
xmc
[20] = 
§
 & 0x7; sr >>= 3;

77 
xmc
[21] = 
§
 & 0x7; sr >>= 3;

78 
§
 = *
c
++;

79 
xmc
[22] = 
§
 & 0x7; sr >>= 3;

80 
xmc
[23] = 
§
 & 0x7; sr >>= 3;

81 
§
 |(
uw‹d
)*
c
++ << 2;

82 
xmc
[24] = 
§
 & 0x7; sr >>= 3;

83 
xmc
[25] = 
§
 & 0x7; sr >>= 3;

84 
§
 |(
uw‹d
)*
c
++ << 4;

85 
Nc
[2] = 
§
 & 0x7f; sr >>= 7;

86 
bc
[2] = 
§
 & 0x3; sr >>= 2;

87 
Mc
[2] = 
§
 & 0x3; sr >>= 2;

88 
§
 |(
uw‹d
)*
c
++ << 1;

89 
xmaxc
[2] = 
§
 & 0x3f; sr >>= 6;

90 
xmc
[26] = 
§
 & 0x7; sr >>= 3;

91 
§
 = *
c
++;

92 
xmc
[27] = 
§
 & 0x7; sr >>= 3;

93 
xmc
[28] = 
§
 & 0x7; sr >>= 3;

94 
§
 |(
uw‹d
)*
c
++ << 2;

95 
xmc
[29] = 
§
 & 0x7; sr >>= 3;

96 
xmc
[30] = 
§
 & 0x7; sr >>= 3;

97 
xmc
[31] = 
§
 & 0x7; sr >>= 3;

98 
§
 |(
uw‹d
)*
c
++ << 1;

99 
xmc
[32] = 
§
 & 0x7; sr >>= 3;

100 
xmc
[33] = 
§
 & 0x7; sr >>= 3;

101 
xmc
[34] = 
§
 & 0x7; sr >>= 3;

102 
§
 = *
c
++;

103 
xmc
[35] = 
§
 & 0x7; sr >>= 3;

104 
xmc
[36] = 
§
 & 0x7; sr >>= 3;

105 
§
 |(
uw‹d
)*
c
++ << 2;

106 
xmc
[37] = 
§
 & 0x7; sr >>= 3;

107 
xmc
[38] = 
§
 & 0x7; sr >>= 3;

108 
§
 |(
uw‹d
)*
c
++ << 4;

109 
Nc
[3] = 
§
 & 0x7f; sr >>= 7;

110 
bc
[3] = 
§
 & 0x3; sr >>= 2;

111 
Mc
[3] = 
§
 & 0x3; sr >>= 2;

112 
§
 |(
uw‹d
)*
c
++ << 1;

113 
xmaxc
[3] = 
§
 & 0x3f; sr >>= 6;

114 
xmc
[39] = 
§
 & 0x7; sr >>= 3;

115 
§
 = *
c
++;

116 
xmc
[40] = 
§
 & 0x7; sr >>= 3;

117 
xmc
[41] = 
§
 & 0x7; sr >>= 3;

118 
§
 |(
uw‹d
)*
c
++ << 2;

119 
xmc
[42] = 
§
 & 0x7; sr >>= 3;

120 
xmc
[43] = 
§
 & 0x7; sr >>= 3;

121 
xmc
[44] = 
§
 & 0x7; sr >>= 3;

122 
§
 |(
uw‹d
)*
c
++ << 1;

123 
xmc
[45] = 
§
 & 0x7; sr >>= 3;

124 
xmc
[46] = 
§
 & 0x7; sr >>= 3;

125 
xmc
[47] = 
§
 & 0x7; sr >>= 3;

126 
§
 = *
c
++;

127 
xmc
[48] = 
§
 & 0x7; sr >>= 3;

128 
xmc
[49] = 
§
 & 0x7; sr >>= 3;

129 
§
 |(
uw‹d
)*
c
++ << 2;

130 
xmc
[50] = 
§
 & 0x7; sr >>= 3;

131 
xmc
[51] = 
§
 & 0x7; sr >>= 3;

133 
s
->
‰ame_chaö
 = 
§
 & 0xf;

136 
§
 = 
s
->
‰ame_chaö
;

137 
§
 |(
uw‹d
)*
c
++ << 4;

138 
LARc
[0] = 
§
 & 0x3f; sr >>= 6;

139 
LARc
[1] = 
§
 & 0x3f; sr >>= 6;

140 
§
 = *
c
++;

141 
LARc
[2] = 
§
 & 0x1f; sr >>= 5;

142 
§
 |(
uw‹d
)*
c
++ << 3;

143 
LARc
[3] = 
§
 & 0x1f; sr >>= 5;

144 
LARc
[4] = 
§
 & 0xf; sr >>= 4;

145 
§
 |(
uw‹d
)*
c
++ << 2;

146 
LARc
[5] = 
§
 & 0xf; sr >>= 4;

147 
LARc
[6] = 
§
 & 0x7; sr >>= 3;

148 
LARc
[7] = 
§
 & 0x7; sr >>= 3;

149 
§
 = *
c
++;

150 
Nc
[0] = 
§
 & 0x7f; sr >>= 7;

151 
§
 |(
uw‹d
)*
c
++ << 1;

152 
bc
[0] = 
§
 & 0x3; sr >>= 2;

153 
Mc
[0] = 
§
 & 0x3; sr >>= 2;

154 
§
 |(
uw‹d
)*
c
++ << 5;

155 
xmaxc
[0] = 
§
 & 0x3f; sr >>= 6;

156 
xmc
[0] = 
§
 & 0x7; sr >>= 3;

157 
xmc
[1] = 
§
 & 0x7; sr >>= 3;

158 
§
 |(
uw‹d
)*
c
++ << 1;

159 
xmc
[2] = 
§
 & 0x7; sr >>= 3;

160 
xmc
[3] = 
§
 & 0x7; sr >>= 3;

161 
xmc
[4] = 
§
 & 0x7; sr >>= 3;

162 
§
 = *
c
++;

163 
xmc
[5] = 
§
 & 0x7; sr >>= 3;

164 
xmc
[6] = 
§
 & 0x7; sr >>= 3;

165 
§
 |(
uw‹d
)*
c
++ << 2;

166 
xmc
[7] = 
§
 & 0x7; sr >>= 3;

167 
xmc
[8] = 
§
 & 0x7; sr >>= 3;

168 
xmc
[9] = 
§
 & 0x7; sr >>= 3;

169 
§
 |(
uw‹d
)*
c
++ << 1;

170 
xmc
[10] = 
§
 & 0x7; sr >>= 3;

171 
xmc
[11] = 
§
 & 0x7; sr >>= 3;

172 
xmc
[12] = 
§
 & 0x7; sr >>= 3;

173 
§
 = *
c
++;

174 
Nc
[1] = 
§
 & 0x7f; sr >>= 7;

175 
§
 |(
uw‹d
)*
c
++ << 1;

176 
bc
[1] = 
§
 & 0x3; sr >>= 2;

177 
Mc
[1] = 
§
 & 0x3; sr >>= 2;

178 
§
 |(
uw‹d
)*
c
++ << 5;

179 
xmaxc
[1] = 
§
 & 0x3f; sr >>= 6;

180 
xmc
[13] = 
§
 & 0x7; sr >>= 3;

181 
xmc
[14] = 
§
 & 0x7; sr >>= 3;

182 
§
 |(
uw‹d
)*
c
++ << 1;

183 
xmc
[15] = 
§
 & 0x7; sr >>= 3;

184 
xmc
[16] = 
§
 & 0x7; sr >>= 3;

185 
xmc
[17] = 
§
 & 0x7; sr >>= 3;

186 
§
 = *
c
++;

187 
xmc
[18] = 
§
 & 0x7; sr >>= 3;

188 
xmc
[19] = 
§
 & 0x7; sr >>= 3;

189 
§
 |(
uw‹d
)*
c
++ << 2;

190 
xmc
[20] = 
§
 & 0x7; sr >>= 3;

191 
xmc
[21] = 
§
 & 0x7; sr >>= 3;

192 
xmc
[22] = 
§
 & 0x7; sr >>= 3;

193 
§
 |(
uw‹d
)*
c
++ << 1;

194 
xmc
[23] = 
§
 & 0x7; sr >>= 3;

195 
xmc
[24] = 
§
 & 0x7; sr >>= 3;

196 
xmc
[25] = 
§
 & 0x7; sr >>= 3;

197 
§
 = *
c
++;

198 
Nc
[2] = 
§
 & 0x7f; sr >>= 7;

199 
§
 |(
uw‹d
)*
c
++ << 1;

200 
bc
[2] = 
§
 & 0x3; sr >>= 2;

201 
Mc
[2] = 
§
 & 0x3; sr >>= 2;

202 
§
 |(
uw‹d
)*
c
++ << 5;

203 
xmaxc
[2] = 
§
 & 0x3f; sr >>= 6;

204 
xmc
[26] = 
§
 & 0x7; sr >>= 3;

205 
xmc
[27] = 
§
 & 0x7; sr >>= 3;

206 
§
 |(
uw‹d
)*
c
++ << 1;

207 
xmc
[28] = 
§
 & 0x7; sr >>= 3;

208 
xmc
[29] = 
§
 & 0x7; sr >>= 3;

209 
xmc
[30] = 
§
 & 0x7; sr >>= 3;

210 
§
 = *
c
++;

211 
xmc
[31] = 
§
 & 0x7; sr >>= 3;

212 
xmc
[32] = 
§
 & 0x7; sr >>= 3;

213 
§
 |(
uw‹d
)*
c
++ << 2;

214 
xmc
[33] = 
§
 & 0x7; sr >>= 3;

215 
xmc
[34] = 
§
 & 0x7; sr >>= 3;

216 
xmc
[35] = 
§
 & 0x7; sr >>= 3;

217 
§
 |(
uw‹d
)*
c
++ << 1;

218 
xmc
[36] = 
§
 & 0x7; sr >>= 3;

219 
xmc
[37] = 
§
 & 0x7; sr >>= 3;

220 
xmc
[38] = 
§
 & 0x7; sr >>= 3;

221 
§
 = *
c
++;

222 
Nc
[3] = 
§
 & 0x7f; sr >>= 7;

223 
§
 |(
uw‹d
)*
c
++ << 1;

224 
bc
[3] = 
§
 & 0x3; sr >>= 2;

225 
Mc
[3] = 
§
 & 0x3; sr >>= 2;

226 
§
 |(
uw‹d
)*
c
++ << 5;

227 
xmaxc
[3] = 
§
 & 0x3f; sr >>= 6;

228 
xmc
[39] = 
§
 & 0x7; sr >>= 3;

229 
xmc
[40] = 
§
 & 0x7; sr >>= 3;

230 
§
 |(
uw‹d
)*
c
++ << 1;

231 
xmc
[41] = 
§
 & 0x7; sr >>= 3;

232 
xmc
[42] = 
§
 & 0x7; sr >>= 3;

233 
xmc
[43] = 
§
 & 0x7; sr >>= 3;

234 
§
 = *
c
++;

235 
xmc
[44] = 
§
 & 0x7; sr >>= 3;

236 
xmc
[45] = 
§
 & 0x7; sr >>= 3;

237 
§
 |(
uw‹d
)*
c
++ << 2;

238 
xmc
[46] = 
§
 & 0x7; sr >>= 3;

239 
xmc
[47] = 
§
 & 0x7; sr >>= 3;

240 
xmc
[48] = 
§
 & 0x7; sr >>= 3;

241 
§
 |(
uw‹d
)*
c
++ << 1;

242 
xmc
[49] = 
§
 & 0x7; sr >>= 3;

243 
xmc
[50] = 
§
 & 0x7; sr >>= 3;

244 
xmc
[51] = 
§
 & 0x7; sr >>= 3;

252 i‡(((*
c
 >> 4Ë& 0x0FË!
GSM_MAGIC
)  -1;

254 
LARc
[0] = (*
c
++ & 0xF) << 2;

255 
LARc
[0] |(*
c
 >> 6) & 0x3;

256 
LARc
[1] = *
c
++ & 0x3F;

257 
LARc
[2] = (*
c
 >> 3) & 0x1F;

258 
LARc
[3] = (*
c
++ & 0x7) << 2;

259 
LARc
[3] |(*
c
 >> 6) & 0x3;

260 
LARc
[4] = (*
c
 >> 2) & 0xF;

261 
LARc
[5] = (*
c
++ & 0x3) << 2;

262 
LARc
[5] |(*
c
 >> 6) & 0x3;

263 
LARc
[6] = (*
c
 >> 3) & 0x7;

264 
LARc
[7] = *
c
++ & 0x7;

265 
Nc
[0] = (*
c
 >> 1) & 0x7F;

266 
bc
[0] = (*
c
++ & 0x1) << 1;

267 
bc
[0] |(*
c
 >> 7) & 0x1;

268 
Mc
[0] = (*
c
 >> 5) & 0x3;

269 
xmaxc
[0] = (*
c
++ & 0x1F) << 1;

270 
xmaxc
[0] |(*
c
 >> 7) & 0x1;

271 
xmc
[0] = (*
c
 >> 4) & 0x7;

272 
xmc
[1] = (*
c
 >> 1) & 0x7;

273 
xmc
[2] = (*
c
++ & 0x1) << 2;

274 
xmc
[2] |(*
c
 >> 6) & 0x3;

275 
xmc
[3] = (*
c
 >> 3) & 0x7;

276 
xmc
[4] = *
c
++ & 0x7;

277 
xmc
[5] = (*
c
 >> 5) & 0x7;

278 
xmc
[6] = (*
c
 >> 2) & 0x7;

279 
xmc
[7] = (*
c
++ & 0x3) << 1;

280 
xmc
[7] |(*
c
 >> 7) & 0x1;

281 
xmc
[8] = (*
c
 >> 4) & 0x7;

282 
xmc
[9] = (*
c
 >> 1) & 0x7;

283 
xmc
[10] = (*
c
++ & 0x1) << 2;

284 
xmc
[10] |(*
c
 >> 6) & 0x3;

285 
xmc
[11] = (*
c
 >> 3) & 0x7;

286 
xmc
[12] = *
c
++ & 0x7;

287 
Nc
[1] = (*
c
 >> 1) & 0x7F;

288 
bc
[1] = (*
c
++ & 0x1) << 1;

289 
bc
[1] |(*
c
 >> 7) & 0x1;

290 
Mc
[1] = (*
c
 >> 5) & 0x3;

291 
xmaxc
[1] = (*
c
++ & 0x1F) << 1;

292 
xmaxc
[1] |(*
c
 >> 7) & 0x1;

293 
xmc
[13] = (*
c
 >> 4) & 0x7;

294 
xmc
[14] = (*
c
 >> 1) & 0x7;

295 
xmc
[15] = (*
c
++ & 0x1) << 2;

296 
xmc
[15] |(*
c
 >> 6) & 0x3;

297 
xmc
[16] = (*
c
 >> 3) & 0x7;

298 
xmc
[17] = *
c
++ & 0x7;

299 
xmc
[18] = (*
c
 >> 5) & 0x7;

300 
xmc
[19] = (*
c
 >> 2) & 0x7;

301 
xmc
[20] = (*
c
++ & 0x3) << 1;

302 
xmc
[20] |(*
c
 >> 7) & 0x1;

303 
xmc
[21] = (*
c
 >> 4) & 0x7;

304 
xmc
[22] = (*
c
 >> 1) & 0x7;

305 
xmc
[23] = (*
c
++ & 0x1) << 2;

306 
xmc
[23] |(*
c
 >> 6) & 0x3;

307 
xmc
[24] = (*
c
 >> 3) & 0x7;

308 
xmc
[25] = *
c
++ & 0x7;

309 
Nc
[2] = (*
c
 >> 1) & 0x7F;

310 
bc
[2] = (*
c
++ & 0x1) << 1;

311 
bc
[2] |(*
c
 >> 7) & 0x1;

312 
Mc
[2] = (*
c
 >> 5) & 0x3;

313 
xmaxc
[2] = (*
c
++ & 0x1F) << 1;

314 
xmaxc
[2] |(*
c
 >> 7) & 0x1;

315 
xmc
[26] = (*
c
 >> 4) & 0x7;

316 
xmc
[27] = (*
c
 >> 1) & 0x7;

317 
xmc
[28] = (*
c
++ & 0x1) << 2;

318 
xmc
[28] |(*
c
 >> 6) & 0x3;

319 
xmc
[29] = (*
c
 >> 3) & 0x7;

320 
xmc
[30] = *
c
++ & 0x7;

321 
xmc
[31] = (*
c
 >> 5) & 0x7;

322 
xmc
[32] = (*
c
 >> 2) & 0x7;

323 
xmc
[33] = (*
c
++ & 0x3) << 1;

324 
xmc
[33] |(*
c
 >> 7) & 0x1;

325 
xmc
[34] = (*
c
 >> 4) & 0x7;

326 
xmc
[35] = (*
c
 >> 1) & 0x7;

327 
xmc
[36] = (*
c
++ & 0x1) << 2;

328 
xmc
[36] |(*
c
 >> 6) & 0x3;

329 
xmc
[37] = (*
c
 >> 3) & 0x7;

330 
xmc
[38] = *
c
++ & 0x7;

331 
Nc
[3] = (*
c
 >> 1) & 0x7F;

332 
bc
[3] = (*
c
++ & 0x1) << 1;

333 
bc
[3] |(*
c
 >> 7) & 0x1;

334 
Mc
[3] = (*
c
 >> 5) & 0x3;

335 
xmaxc
[3] = (*
c
++ & 0x1F) << 1;

336 
xmaxc
[3] |(*
c
 >> 7) & 0x1;

337 
xmc
[39] = (*
c
 >> 4) & 0x7;

338 
xmc
[40] = (*
c
 >> 1) & 0x7;

339 
xmc
[41] = (*
c
++ & 0x1) << 2;

340 
xmc
[41] |(*
c
 >> 6) & 0x3;

341 
xmc
[42] = (*
c
 >> 3) & 0x7;

342 
xmc
[43] = *
c
++ & 0x7;

343 
xmc
[44] = (*
c
 >> 5) & 0x7;

344 
xmc
[45] = (*
c
 >> 2) & 0x7;

345 
xmc
[46] = (*
c
++ & 0x3) << 1;

346 
xmc
[46] |(*
c
 >> 7) & 0x1;

347 
xmc
[47] = (*
c
 >> 4) & 0x7;

348 
xmc
[48] = (*
c
 >> 1) & 0x7;

349 
xmc
[49] = (*
c
++ & 0x1) << 2;

350 
xmc
[49] |(*
c
 >> 6) & 0x3;

351 
xmc
[50] = (*
c
 >> 3) & 0x7;

352 
xmc
[51] = *
c
 & 0x7;

355 
	`Gsm_Decodî
(
s
, 
LARc
, 
Nc
, 
bc
, 
Mc
, 
xmaxc
, 
xmc
, 
èrgë
);

358 
	}
}

	@gsm_destroy.c

7 
	~"gsm.h
"

8 
	~"c⁄fig.h
"

10 #ifdef 
HAS_STDLIB_H


11 
	~<°dlib.h
>

13 #ifdef 
HAS_MALLOC_H


14 
	~<mÆloc.h
>

16 
‰ì
();

20 
	$gsm_de°roy
 (
gsm
 
S
)

22 i‡(
S
Ë
	`‰ì
((*)S);

23 
	}
}

	@gsm_encode.c

7 
	~"gsm610_¥iv.h
"

8 
	~"gsm.h
"

10 
	$gsm_ícode
 (
gsm
 
s
, 
gsm_sig«l
 * 
sour˚
, 
gsm_byã
 * 
c
)

12 
w‹d
 
LARc
[8], 
Nc
[4], 
Mc
[4], 
bc
[4], 
xmaxc
[4], 
xmc
[13*4];

14 
	`Gsm_Codî
(
s
, 
sour˚
, 
LARc
, 
Nc
, 
bc
, 
Mc
, 
xmaxc
, 
xmc
);

103 #ifde‡
WAV49


105 i‡(
s
->
wav_fmt
) {

106 
s
->
‰ame_ödex
 = !s->frame_index;

107 i‡(
s
->
‰ame_ödex
) {

109 
uw‹d
 
§
;

111 
§
 = 0;

112 
§
 = s∏>> 6 | 
LARc
[0] << 10;

113 
§
 = s∏>> 6 | 
LARc
[1] << 10;

114 *
c
++ = 
§
 >> 4;

115 
§
 = s∏>> 5 | 
LARc
[2] << 11;

116 *
c
++ = 
§
 >> 7;

117 
§
 = s∏>> 5 | 
LARc
[3] << 11;

118 
§
 = s∏>> 4 | 
LARc
[4] << 12;

119 *
c
++ = 
§
 >> 6;

120 
§
 = s∏>> 4 | 
LARc
[5] << 12;

121 
§
 = s∏>> 3 | 
LARc
[6] << 13;

122 *
c
++ = 
§
 >> 7;

123 
§
 = s∏>> 3 | 
LARc
[7] << 13;

124 
§
 = s∏>> 7 | 
Nc
[0] << 9;

125 *
c
++ = 
§
 >> 5;

126 
§
 = s∏>> 2 | 
bc
[0] << 14;

127 
§
 = s∏>> 2 | 
Mc
[0] << 14;

128 
§
 = s∏>> 6 | 
xmaxc
[0] << 10;

129 *
c
++ = 
§
 >> 3;

130 
§
 = s∏>> 3 | 
xmc
[0] << 13;

131 *
c
++ = 
§
 >> 8;

132 
§
 = s∏>> 3 | 
xmc
[1] << 13;

133 
§
 = s∏>> 3 | 
xmc
[2] << 13;

134 
§
 = s∏>> 3 | 
xmc
[3] << 13;

135 *
c
++ = 
§
 >> 7;

136 
§
 = s∏>> 3 | 
xmc
[4] << 13;

137 
§
 = s∏>> 3 | 
xmc
[5] << 13;

138 
§
 = s∏>> 3 | 
xmc
[6] << 13;

139 *
c
++ = 
§
 >> 6;

140 
§
 = s∏>> 3 | 
xmc
[7] << 13;

141 
§
 = s∏>> 3 | 
xmc
[8] << 13;

142 *
c
++ = 
§
 >> 8;

143 
§
 = s∏>> 3 | 
xmc
[9] << 13;

144 
§
 = s∏>> 3 | 
xmc
[10] << 13;

145 
§
 = s∏>> 3 | 
xmc
[11] << 13;

146 *
c
++ = 
§
 >> 7;

147 
§
 = s∏>> 3 | 
xmc
[12] << 13;

148 
§
 = s∏>> 7 | 
Nc
[1] << 9;

149 *
c
++ = 
§
 >> 5;

150 
§
 = s∏>> 2 | 
bc
[1] << 14;

151 
§
 = s∏>> 2 | 
Mc
[1] << 14;

152 
§
 = s∏>> 6 | 
xmaxc
[1] << 10;

153 *
c
++ = 
§
 >> 3;

154 
§
 = s∏>> 3 | 
xmc
[13] << 13;

155 *
c
++ = 
§
 >> 8;

156 
§
 = s∏>> 3 | 
xmc
[14] << 13;

157 
§
 = s∏>> 3 | 
xmc
[15] << 13;

158 
§
 = s∏>> 3 | 
xmc
[16] << 13;

159 *
c
++ = 
§
 >> 7;

160 
§
 = s∏>> 3 | 
xmc
[17] << 13;

161 
§
 = s∏>> 3 | 
xmc
[18] << 13;

162 
§
 = s∏>> 3 | 
xmc
[19] << 13;

163 *
c
++ = 
§
 >> 6;

164 
§
 = s∏>> 3 | 
xmc
[20] << 13;

165 
§
 = s∏>> 3 | 
xmc
[21] << 13;

166 *
c
++ = 
§
 >> 8;

167 
§
 = s∏>> 3 | 
xmc
[22] << 13;

168 
§
 = s∏>> 3 | 
xmc
[23] << 13;

169 
§
 = s∏>> 3 | 
xmc
[24] << 13;

170 *
c
++ = 
§
 >> 7;

171 
§
 = s∏>> 3 | 
xmc
[25] << 13;

172 
§
 = s∏>> 7 | 
Nc
[2] << 9;

173 *
c
++ = 
§
 >> 5;

174 
§
 = s∏>> 2 | 
bc
[2] << 14;

175 
§
 = s∏>> 2 | 
Mc
[2] << 14;

176 
§
 = s∏>> 6 | 
xmaxc
[2] << 10;

177 *
c
++ = 
§
 >> 3;

178 
§
 = s∏>> 3 | 
xmc
[26] << 13;

179 *
c
++ = 
§
 >> 8;

180 
§
 = s∏>> 3 | 
xmc
[27] << 13;

181 
§
 = s∏>> 3 | 
xmc
[28] << 13;

182 
§
 = s∏>> 3 | 
xmc
[29] << 13;

183 *
c
++ = 
§
 >> 7;

184 
§
 = s∏>> 3 | 
xmc
[30] << 13;

185 
§
 = s∏>> 3 | 
xmc
[31] << 13;

186 
§
 = s∏>> 3 | 
xmc
[32] << 13;

187 *
c
++ = 
§
 >> 6;

188 
§
 = s∏>> 3 | 
xmc
[33] << 13;

189 
§
 = s∏>> 3 | 
xmc
[34] << 13;

190 *
c
++ = 
§
 >> 8;

191 
§
 = s∏>> 3 | 
xmc
[35] << 13;

192 
§
 = s∏>> 3 | 
xmc
[36] << 13;

193 
§
 = s∏>> 3 | 
xmc
[37] << 13;

194 *
c
++ = 
§
 >> 7;

195 
§
 = s∏>> 3 | 
xmc
[38] << 13;

196 
§
 = s∏>> 7 | 
Nc
[3] << 9;

197 *
c
++ = 
§
 >> 5;

198 
§
 = s∏>> 2 | 
bc
[3] << 14;

199 
§
 = s∏>> 2 | 
Mc
[3] << 14;

200 
§
 = s∏>> 6 | 
xmaxc
[3] << 10;

201 *
c
++ = 
§
 >> 3;

202 
§
 = s∏>> 3 | 
xmc
[39] << 13;

203 *
c
++ = 
§
 >> 8;

204 
§
 = s∏>> 3 | 
xmc
[40] << 13;

205 
§
 = s∏>> 3 | 
xmc
[41] << 13;

206 
§
 = s∏>> 3 | 
xmc
[42] << 13;

207 *
c
++ = 
§
 >> 7;

208 
§
 = s∏>> 3 | 
xmc
[43] << 13;

209 
§
 = s∏>> 3 | 
xmc
[44] << 13;

210 
§
 = s∏>> 3 | 
xmc
[45] << 13;

211 *
c
++ = 
§
 >> 6;

212 
§
 = s∏>> 3 | 
xmc
[46] << 13;

213 
§
 = s∏>> 3 | 
xmc
[47] << 13;

214 *
c
++ = 
§
 >> 8;

215 
§
 = s∏>> 3 | 
xmc
[48] << 13;

216 
§
 = s∏>> 3 | 
xmc
[49] << 13;

217 
§
 = s∏>> 3 | 
xmc
[50] << 13;

218 *
c
++ = 
§
 >> 7;

219 
§
 = s∏>> 3 | 
xmc
[51] << 13;

220 
§
 = sr >> 4;

221 *
c
 = 
§
 >> 8;

222 
s
->
‰ame_chaö
 = *
c
;

225 
uw‹d
 
§
;

227 
§
 = 0;

228 
§
 = s∏>> 4 | 
s
->
‰ame_chaö
 << 12;

229 
§
 = s∏>> 6 | 
LARc
[0] << 10;

230 *
c
++ = 
§
 >> 6;

231 
§
 = s∏>> 6 | 
LARc
[1] << 10;

232 *
c
++ = 
§
 >> 8;

233 
§
 = s∏>> 5 | 
LARc
[2] << 11;

234 
§
 = s∏>> 5 | 
LARc
[3] << 11;

235 *
c
++ = 
§
 >> 6;

236 
§
 = s∏>> 4 | 
LARc
[4] << 12;

237 
§
 = s∏>> 4 | 
LARc
[5] << 12;

238 *
c
++ = 
§
 >> 6;

239 
§
 = s∏>> 3 | 
LARc
[6] << 13;

240 
§
 = s∏>> 3 | 
LARc
[7] << 13;

241 *
c
++ = 
§
 >> 8;

242 
§
 = s∏>> 7 | 
Nc
[0] << 9;

243 
§
 = s∏>> 2 | 
bc
[0] << 14;

244 *
c
++ = 
§
 >> 7;

245 
§
 = s∏>> 2 | 
Mc
[0] << 14;

246 
§
 = s∏>> 6 | 
xmaxc
[0] << 10;

247 *
c
++ = 
§
 >> 7;

248 
§
 = s∏>> 3 | 
xmc
[0] << 13;

249 
§
 = s∏>> 3 | 
xmc
[1] << 13;

250 
§
 = s∏>> 3 | 
xmc
[2] << 13;

251 *
c
++ = 
§
 >> 6;

252 
§
 = s∏>> 3 | 
xmc
[3] << 13;

253 
§
 = s∏>> 3 | 
xmc
[4] << 13;

254 *
c
++ = 
§
 >> 8;

255 
§
 = s∏>> 3 | 
xmc
[5] << 13;

256 
§
 = s∏>> 3 | 
xmc
[6] << 13;

257 
§
 = s∏>> 3 | 
xmc
[7] << 13;

258 *
c
++ = 
§
 >> 7;

259 
§
 = s∏>> 3 | 
xmc
[8] << 13;

260 
§
 = s∏>> 3 | 
xmc
[9] << 13;

261 
§
 = s∏>> 3 | 
xmc
[10] << 13;

262 *
c
++ = 
§
 >> 6;

263 
§
 = s∏>> 3 | 
xmc
[11] << 13;

264 
§
 = s∏>> 3 | 
xmc
[12] << 13;

265 *
c
++ = 
§
 >> 8;

266 
§
 = s∏>> 7 | 
Nc
[1] << 9;

267 
§
 = s∏>> 2 | 
bc
[1] << 14;

268 *
c
++ = 
§
 >> 7;

269 
§
 = s∏>> 2 | 
Mc
[1] << 14;

270 
§
 = s∏>> 6 | 
xmaxc
[1] << 10;

271 *
c
++ = 
§
 >> 7;

272 
§
 = s∏>> 3 | 
xmc
[13] << 13;

273 
§
 = s∏>> 3 | 
xmc
[14] << 13;

274 
§
 = s∏>> 3 | 
xmc
[15] << 13;

275 *
c
++ = 
§
 >> 6;

276 
§
 = s∏>> 3 | 
xmc
[16] << 13;

277 
§
 = s∏>> 3 | 
xmc
[17] << 13;

278 *
c
++ = 
§
 >> 8;

279 
§
 = s∏>> 3 | 
xmc
[18] << 13;

280 
§
 = s∏>> 3 | 
xmc
[19] << 13;

281 
§
 = s∏>> 3 | 
xmc
[20] << 13;

282 *
c
++ = 
§
 >> 7;

283 
§
 = s∏>> 3 | 
xmc
[21] << 13;

284 
§
 = s∏>> 3 | 
xmc
[22] << 13;

285 
§
 = s∏>> 3 | 
xmc
[23] << 13;

286 *
c
++ = 
§
 >> 6;

287 
§
 = s∏>> 3 | 
xmc
[24] << 13;

288 
§
 = s∏>> 3 | 
xmc
[25] << 13;

289 *
c
++ = 
§
 >> 8;

290 
§
 = s∏>> 7 | 
Nc
[2] << 9;

291 
§
 = s∏>> 2 | 
bc
[2] << 14;

292 *
c
++ = 
§
 >> 7;

293 
§
 = s∏>> 2 | 
Mc
[2] << 14;

294 
§
 = s∏>> 6 | 
xmaxc
[2] << 10;

295 *
c
++ = 
§
 >> 7;

296 
§
 = s∏>> 3 | 
xmc
[26] << 13;

297 
§
 = s∏>> 3 | 
xmc
[27] << 13;

298 
§
 = s∏>> 3 | 
xmc
[28] << 13;

299 *
c
++ = 
§
 >> 6;

300 
§
 = s∏>> 3 | 
xmc
[29] << 13;

301 
§
 = s∏>> 3 | 
xmc
[30] << 13;

302 *
c
++ = 
§
 >> 8;

303 
§
 = s∏>> 3 | 
xmc
[31] << 13;

304 
§
 = s∏>> 3 | 
xmc
[32] << 13;

305 
§
 = s∏>> 3 | 
xmc
[33] << 13;

306 *
c
++ = 
§
 >> 7;

307 
§
 = s∏>> 3 | 
xmc
[34] << 13;

308 
§
 = s∏>> 3 | 
xmc
[35] << 13;

309 
§
 = s∏>> 3 | 
xmc
[36] << 13;

310 *
c
++ = 
§
 >> 6;

311 
§
 = s∏>> 3 | 
xmc
[37] << 13;

312 
§
 = s∏>> 3 | 
xmc
[38] << 13;

313 *
c
++ = 
§
 >> 8;

314 
§
 = s∏>> 7 | 
Nc
[3] << 9;

315 
§
 = s∏>> 2 | 
bc
[3] << 14;

316 *
c
++ = 
§
 >> 7;

317 
§
 = s∏>> 2 | 
Mc
[3] << 14;

318 
§
 = s∏>> 6 | 
xmaxc
[3] << 10;

319 *
c
++ = 
§
 >> 7;

320 
§
 = s∏>> 3 | 
xmc
[39] << 13;

321 
§
 = s∏>> 3 | 
xmc
[40] << 13;

322 
§
 = s∏>> 3 | 
xmc
[41] << 13;

323 *
c
++ = 
§
 >> 6;

324 
§
 = s∏>> 3 | 
xmc
[42] << 13;

325 
§
 = s∏>> 3 | 
xmc
[43] << 13;

326 *
c
++ = 
§
 >> 8;

327 
§
 = s∏>> 3 | 
xmc
[44] << 13;

328 
§
 = s∏>> 3 | 
xmc
[45] << 13;

329 
§
 = s∏>> 3 | 
xmc
[46] << 13;

330 *
c
++ = 
§
 >> 7;

331 
§
 = s∏>> 3 | 
xmc
[47] << 13;

332 
§
 = s∏>> 3 | 
xmc
[48] << 13;

333 
§
 = s∏>> 3 | 
xmc
[49] << 13;

334 *
c
++ = 
§
 >> 6;

335 
§
 = s∏>> 3 | 
xmc
[50] << 13;

336 
§
 = s∏>> 3 | 
xmc
[51] << 13;

337 *
c
++ = 
§
 >> 8;

346 *
c
++ = ((
GSM_MAGIC
 & 0xF) << 4)

347 | ((
LARc
[0] >> 2) & 0xF);

348 *
c
++ = ((
LARc
[0] & 0x3) << 6)

349 | (
LARc
[1] & 0x3F);

350 *
c
++ = ((
LARc
[2] & 0x1F) << 3)

351 | ((
LARc
[3] >> 2) & 0x7);

352 *
c
++ = ((
LARc
[3] & 0x3) << 6)

353 | ((
LARc
[4] & 0xF) << 2)

354 | ((
LARc
[5] >> 2) & 0x3);

355 *
c
++ = ((
LARc
[5] & 0x3) << 6)

356 | ((
LARc
[6] & 0x7) << 3)

357 | (
LARc
[7] & 0x7);

358 *
c
++ = ((
Nc
[0] & 0x7F) << 1)

359 | ((
bc
[0] >> 1) & 0x1);

360 *
c
++ = ((
bc
[0] & 0x1) << 7)

361 | ((
Mc
[0] & 0x3) << 5)

362 | ((
xmaxc
[0] >> 1) & 0x1F);

363 *
c
++ = ((
xmaxc
[0] & 0x1) << 7)

364 | ((
xmc
[0] & 0x7) << 4)

365 | ((
xmc
[1] & 0x7) << 1)

366 | ((
xmc
[2] >> 2) & 0x1);

367 *
c
++ = ((
xmc
[2] & 0x3) << 6)

368 | ((
xmc
[3] & 0x7) << 3)

369 | (
xmc
[4] & 0x7);

370 *
c
++ = ((
xmc
[5] & 0x7) << 5)

371 | ((
xmc
[6] & 0x7) << 2)

372 | ((
xmc
[7] >> 1) & 0x3);

373 *
c
++ = ((
xmc
[7] & 0x1) << 7)

374 | ((
xmc
[8] & 0x7) << 4)

375 | ((
xmc
[9] & 0x7) << 1)

376 | ((
xmc
[10] >> 2) & 0x1);

377 *
c
++ = ((
xmc
[10] & 0x3) << 6)

378 | ((
xmc
[11] & 0x7) << 3)

379 | (
xmc
[12] & 0x7);

380 *
c
++ = ((
Nc
[1] & 0x7F) << 1)

381 | ((
bc
[1] >> 1) & 0x1);

382 *
c
++ = ((
bc
[1] & 0x1) << 7)

383 | ((
Mc
[1] & 0x3) << 5)

384 | ((
xmaxc
[1] >> 1) & 0x1F);

385 *
c
++ = ((
xmaxc
[1] & 0x1) << 7)

386 | ((
xmc
[13] & 0x7) << 4)

387 | ((
xmc
[14] & 0x7) << 1)

388 | ((
xmc
[15] >> 2) & 0x1);

389 *
c
++ = ((
xmc
[15] & 0x3) << 6)

390 | ((
xmc
[16] & 0x7) << 3)

391 | (
xmc
[17] & 0x7);

392 *
c
++ = ((
xmc
[18] & 0x7) << 5)

393 | ((
xmc
[19] & 0x7) << 2)

394 | ((
xmc
[20] >> 1) & 0x3);

395 *
c
++ = ((
xmc
[20] & 0x1) << 7)

396 | ((
xmc
[21] & 0x7) << 4)

397 | ((
xmc
[22] & 0x7) << 1)

398 | ((
xmc
[23] >> 2) & 0x1);

399 *
c
++ = ((
xmc
[23] & 0x3) << 6)

400 | ((
xmc
[24] & 0x7) << 3)

401 | (
xmc
[25] & 0x7);

402 *
c
++ = ((
Nc
[2] & 0x7F) << 1)

403 | ((
bc
[2] >> 1) & 0x1);

404 *
c
++ = ((
bc
[2] & 0x1) << 7)

405 | ((
Mc
[2] & 0x3) << 5)

406 | ((
xmaxc
[2] >> 1) & 0x1F);

407 *
c
++ = ((
xmaxc
[2] & 0x1) << 7)

408 | ((
xmc
[26] & 0x7) << 4)

409 | ((
xmc
[27] & 0x7) << 1)

410 | ((
xmc
[28] >> 2) & 0x1);

411 *
c
++ = ((
xmc
[28] & 0x3) << 6)

412 | ((
xmc
[29] & 0x7) << 3)

413 | (
xmc
[30] & 0x7);

414 *
c
++ = ((
xmc
[31] & 0x7) << 5)

415 | ((
xmc
[32] & 0x7) << 2)

416 | ((
xmc
[33] >> 1) & 0x3);

417 *
c
++ = ((
xmc
[33] & 0x1) << 7)

418 | ((
xmc
[34] & 0x7) << 4)

419 | ((
xmc
[35] & 0x7) << 1)

420 | ((
xmc
[36] >> 2) & 0x1);

421 *
c
++ = ((
xmc
[36] & 0x3) << 6)

422 | ((
xmc
[37] & 0x7) << 3)

423 | (
xmc
[38] & 0x7);

424 *
c
++ = ((
Nc
[3] & 0x7F) << 1)

425 | ((
bc
[3] >> 1) & 0x1);

426 *
c
++ = ((
bc
[3] & 0x1) << 7)

427 | ((
Mc
[3] & 0x3) << 5)

428 | ((
xmaxc
[3] >> 1) & 0x1F);

429 *
c
++ = ((
xmaxc
[3] & 0x1) << 7)

430 | ((
xmc
[39] & 0x7) << 4)

431 | ((
xmc
[40] & 0x7) << 1)

432 | ((
xmc
[41] >> 2) & 0x1);

433 *
c
++ = ((
xmc
[41] & 0x3) << 6)

434 | ((
xmc
[42] & 0x7) << 3)

435 | (
xmc
[43] & 0x7);

436 *
c
++ = ((
xmc
[44] & 0x7) << 5)

437 | ((
xmc
[45] & 0x7) << 2)

438 | ((
xmc
[46] >> 1) & 0x3);

439 *
c
++ = ((
xmc
[46] & 0x1) << 7)

440 | ((
xmc
[47] & 0x7) << 4)

441 | ((
xmc
[48] & 0x7) << 1)

442 | ((
xmc
[49] >> 2) & 0x1);

443 *
c
++ = ((
xmc
[49] & 0x3) << 6)

444 | ((
xmc
[50] & 0x7) << 3)

445 | (
xmc
[51] & 0x7);

448 
	}
}

	@gsm_option.c

7 
	~"gsm610_¥iv.h
"

9 
	~"gsm.h
"

11 
	$gsm_›ti⁄
 (
gsm
 
r
, 
›t
, * 
vÆ
)

13 
ªsu…
 = -1;

15 
›t
) {

16 
GSM_OPT_LTP_CUT
:

17 #ifde‡ 
LTP_CUT


18 
ªsu…
 = 
r
->
…p_cut
;

19 i‡(
vÆ
Ë
r
->
…p_cut
 = *val;

23 
GSM_OPT_VERBOSE
:

24 #i‚def 
NDEBUG


25 
ªsu…
 = 
r
->
vîbo£
;

26 i‡(
vÆ
Ë
r
->
vîbo£
 = *val;

30 
GSM_OPT_FAST
:

32 #if 
	`deföed
(
FAST
Ë&& deföed(
USE_FLOAT_MUL
)

33 
ªsu…
 = 
r
->
Á°
;

34 i‡(
vÆ
Ë
r
->
Á°
 = !!*val;

38 
GSM_OPT_FRAME_CHAIN
:

40 #ifde‡
WAV49


41 
ªsu…
 = 
r
->
‰ame_chaö
;

42 i‡(
vÆ
Ë
r
->
‰ame_chaö
 = *val;

46 
GSM_OPT_FRAME_INDEX
:

48 #ifde‡
WAV49


49 
ªsu…
 = 
r
->
‰ame_ödex
;

50 i‡(
vÆ
Ë
r
->
‰ame_ödex
 = *val;

54 
GSM_OPT_WAV49
:

56 #ifde‡
WAV49


57 
ªsu…
 = 
r
->
wav_fmt
;

58 i‡(
vÆ
Ë
r
->
wav_fmt
 = !!*val;

65  
ªsu…
;

66 
	}
}

	@long_term.c

7 
	~<°dio.h
>

8 
	~<as£π.h
>

10 
	~"gsm610_¥iv.h
"

12 
	~"gsm.h
"

42 #i‚de‡ 
USE_FLOAT_MUL


44 #ifdef 
LTP_CUT


46 
	$Cut_CÆcuœti⁄_of_the_LTP_∑ømëîs
 (

48 
gsm_°©e
 * 
°
,

50 
w‹d
 * 
d
,

51 
w‹d
 * 
dp
,

52 
w‹d
 * 
bc_out
,

53 
w‹d
 * 
Nc_out


56 
k
, 
œmbda
;

57 
w‹d
 
Nc
, 
bc
;

58 
w‹d
 
wt
[40];

60 
l⁄gw‹d
 
L_ªsu…
;

61 
l⁄gw‹d
 
L_max
, 
L_powî
;

62 
w‹d
 
R
, 
S
, 
dmax
, 
sˇl
, 
be°_k
;

63 
w‹d
 
…p_cut
;

65 
w‹d
 
ãmp
, 
wt_k
;

69 
dmax
 = 0;

70 
k
 = 0; k <= 39; k++) {

71 
ãmp
 = 
d
[
k
];

72 
ãmp
 = 
	`GSM_ABS
(Åemp );

73 i‡(
ãmp
 > 
dmax
) {

74 
dmax
 = 
ãmp
;

75 
be°_k
 = 
k
;

78 
ãmp
 = 0;

79 i‡(
dmax
 =0Ë
sˇl
 = 0;

81 
	`as£π
(
dmax
 > 0);

82 
ãmp
 = 
	`gsm_n‹m
–(
l⁄gw‹d
)
dmax
 << 16 );

84 i‡(
ãmp
 > 6Ë
sˇl
 = 0;

85 
sˇl
 = 6 - 
ãmp
;

86 
	`as£π
(
sˇl
 >= 0);

90 
L_max
 = 0;

91 
Nc
 = 40;

92 
wt_k
 = 
	`SASR_W
(
d
[
be°_k
], 
sˇl
);

94 
œmbda
 = 40;Üambda <= 120;Üambda++) {

95 
L_ªsu…
 = (
l⁄gw‹d
)
wt_k
 * 
dp
[
be°_k
 - 
œmbda
];

96 i‡(
L_ªsu…
 > 
L_max
) {

97 
Nc
 = 
œmbda
;

98 
L_max
 = 
L_ªsu…
;

101 *
Nc_out
 = 
Nc
;

102 
L_max
 <<= 1;

106 
	`as£π
(
sˇl
 <= 100 && scal >= -100);

107 
L_max
 = L_max >> (6 - 
sˇl
);

109 
	`as£π
–
Nc
 <= 120 && Nc >= 40);

114 
L_powî
 = 0;

115 
k
 = 0; k <= 39; k++) {

117 
l⁄gw‹d
 
L_ãmp
;

119 
L_ãmp
 = 
	`SASR_W
–
dp
[
k
 - 
Nc
], 3 );

120 
L_powî
 +
L_ãmp
 * L_temp;

122 
L_powî
 <<= 1;

127 i‡(
L_max
 <= 0) {

128 *
bc_out
 = 0;

131 i‡(
L_max
 >
L_powî
) {

132 *
bc_out
 = 3;

136 
ãmp
 = 
	`gsm_n‹m
–
L_powî
 );

138 
R
 = 
	`SASR
–
L_max
 << 
ãmp
, 16 );

139 
S
 = 
	`SASR
–
L_powî
 << 
ãmp
, 16 );

147 
bc
 = 0; b¯<2; bc++Ëi‡(
R
 <
	`gsm_mu…
(
S
, 
gsm_DLB
[bc])) ;

148 *
bc_out
 = 
bc
;

149 
	}
}

153 
	$CÆcuœti⁄_of_the_LTP_∑ømëîs
 (

154 
w‹d
 * 
d
,

155 
w‹d
 * 
dp
,

156 
w‹d
 * 
bc_out
,

157 
w‹d
 * 
Nc_out


160 
k
, 
œmbda
;

161 
w‹d
 
Nc
, 
bc
;

162 
w‹d
 
wt
[40];

164 
l⁄gw‹d
 
L_max
, 
L_powî
;

165 
w‹d
 
R
, 
S
, 
dmax
, 
sˇl
;

166 
w‹d
 
ãmp
;

170 
dmax
 = 0;

172 
k
 = 0; k <= 39; k++) {

173 
ãmp
 = 
d
[
k
];

174 
ãmp
 = 
	`GSM_ABS
(Åemp );

175 i‡(
ãmp
 > 
dmax
) dmax =Åemp;

178 
ãmp
 = 0;

179 i‡(
dmax
 =0Ë
sˇl
 = 0;

181 
	`as£π
(
dmax
 > 0);

182 
ãmp
 = 
	`gsm_n‹m
–(
l⁄gw‹d
)
dmax
 << 16 );

185 i‡(
ãmp
 > 6Ë
sˇl
 = 0;

186 
sˇl
 = 6 - 
ãmp
;

188 
	`as£π
(
sˇl
 >= 0);

193 
k
 = 0; k <39; k++Ë
wt
[k] = 
	`SASR_W
–
d
[k], 
sˇl
 );

197 
L_max
 = 0;

198 
Nc
 = 40;

200 
œmbda
 = 40;Üambda <= 120;Üambda++) {

202 #unde‡
STEP


203 
	#STEP
(
k
Ë(
l⁄gw‹d
)
wt
[k] * 
dp
[k - 
œmbda
]

	)

205 
l⁄gw‹d
 
L_ªsu…
;

207 
L_ªsu…
 = 
	`STEP
(0) ; L_result += STEP(1) ;

208 
L_ªsu…
 +
	`STEP
(2) ; L_result += STEP(3) ;

209 
L_ªsu…
 +
	`STEP
(4) ; L_result += STEP(5) ;

210 
L_ªsu…
 +
	`STEP
(6) ; L_result += STEP(7) ;

211 
L_ªsu…
 +
	`STEP
(8) ; L_result += STEP(9) ;

212 
L_ªsu…
 +
	`STEP
(10) ; L_result += STEP(11) ;

213 
L_ªsu…
 +
	`STEP
(12) ; L_result += STEP(13) ;

214 
L_ªsu…
 +
	`STEP
(14) ; L_result += STEP(15) ;

215 
L_ªsu…
 +
	`STEP
(16) ; L_result += STEP(17) ;

216 
L_ªsu…
 +
	`STEP
(18) ; L_result += STEP(19) ;

217 
L_ªsu…
 +
	`STEP
(20) ; L_result += STEP(21) ;

218 
L_ªsu…
 +
	`STEP
(22) ; L_result += STEP(23) ;

219 
L_ªsu…
 +
	`STEP
(24) ; L_result += STEP(25) ;

220 
L_ªsu…
 +
	`STEP
(26) ; L_result += STEP(27) ;

221 
L_ªsu…
 +
	`STEP
(28) ; L_result += STEP(29) ;

222 
L_ªsu…
 +
	`STEP
(30) ; L_result += STEP(31) ;

223 
L_ªsu…
 +
	`STEP
(32) ; L_result += STEP(33) ;

224 
L_ªsu…
 +
	`STEP
(34) ; L_result += STEP(35) ;

225 
L_ªsu…
 +
	`STEP
(36) ; L_result += STEP(37) ;

226 
L_ªsu…
 +
	`STEP
(38) ; L_result += STEP(39) ;

228 i‡(
L_ªsu…
 > 
L_max
) {

230 
Nc
 = 
œmbda
;

231 
L_max
 = 
L_ªsu…
;

235 *
Nc_out
 = 
Nc
;

237 
L_max
 <<= 1;

241 
	`as£π
(
sˇl
 <= 100 && scal >= -100);

242 
L_max
 = L_max >> (6 - 
sˇl
);

244 
	`as£π
–
Nc
 <= 120 && Nc >= 40);

249 
L_powî
 = 0;

250 
k
 = 0; k <= 39; k++) {

252 
l⁄gw‹d
 
L_ãmp
;

254 
L_ãmp
 = 
	`SASR_W
–
dp
[
k
 - 
Nc
], 3 );

255 
L_powî
 +
L_ãmp
 * L_temp;

257 
L_powî
 <<= 1;

262 i‡(
L_max
 <= 0) {

263 *
bc_out
 = 0;

266 i‡(
L_max
 >
L_powî
) {

267 *
bc_out
 = 3;

271 
ãmp
 = 
	`gsm_n‹m
–
L_powî
 );

273 
R
 = 
	`SASR_L
–
L_max
 << 
ãmp
, 16 );

274 
S
 = 
	`SASR_L
–
L_powî
 << 
ãmp
, 16 );

282 
bc
 = 0; b¯<2; bc++Ëi‡(
R
 <
	`gsm_mu…
(
S
, 
gsm_DLB
[bc])) ;

283 *
bc_out
 = 
bc
;

284 
	}
}

288 #ifdef 
LTP_CUT


290 
	$Cut_CÆcuœti⁄_of_the_LTP_∑ømëîs
 (

291 
gsm_°©e
 * 
°
,

292 
w‹d
 * 
d
,

293 
w‹d
 * 
dp
,

294 
w‹d
 * 
bc_out
,

295 
w‹d
 * 
Nc_out


298 
k
, 
œmbda
;

299 
w‹d
 
Nc
, 
bc
;

300 
w‹d
 
…p_cut
;

302 
wt_Êﬂt
[40];

303 
dp_Êﬂt_ba£
[120], * 
dp_Êﬂt
 = dp_float_base + 120;

305 
l⁄gw‹d
 
L_max
, 
L_powî
;

306 
w‹d
 
R
, 
S
, 
dmax
, 
sˇl
;

307 
w‹d
 
ãmp
;

311 
dmax
 = 0;

313 
k
 = 0; k <= 39; k++) {

314 
ãmp
 = 
d
[
k
];

315 
ãmp
 = 
	`GSM_ABS
(Åemp );

316 i‡(
ãmp
 > 
dmax
) dmax =Åemp;

319 
ãmp
 = 0;

320 i‡(
dmax
 =0Ë
sˇl
 = 0;

322 
	`as£π
(
dmax
 > 0);

323 
ãmp
 = 
	`gsm_n‹m
–(
l⁄gw‹d
)
dmax
 << 16 );

326 i‡(
ãmp
 > 6Ë
sˇl
 = 0;

327 
sˇl
 = 6 - 
ãmp
;

329 
	`as£π
(
sˇl
 >= 0);

330 
…p_cut
 = (
l⁄gw‹d
)
	`SASR_W
(
dmax
, 
sˇl
Ë* 
°
->ltp_cut / 100;

336 
k
 = 0; k < 40; k++) {

337 
w‹d
 
w
 = 
	`SASR_W
–
d
[
k
], 
sˇl
 );

338 i‡(
w
 < 0 ? w > -
…p_cut
 : w <Ütp_cut) {

339 
wt_Êﬂt
[
k
] = 0.0;

342 
wt_Êﬂt
[
k
] = 
w
;

345 
k
 = -120; k < 0; k++Ë
dp_Êﬂt
[k] = 
dp
[k];

349 
L_max
 = 0;

350 
Nc
 = 40;

352 
œmbda
 = 40;Üambda <= 120;Üambda += 9) {

356 *
Õ
 = 
dp_Êﬂt
 - 
œmbda
;

358 
W
;

359 
a
 = 
Õ
[-8], 
b
 =Üp[-7], 
c
 =Üp[-6],

360 
d
 = 
Õ
[-5], 
e
 =Üp[-4], 
f
 =Üp[-3],

361 
g
 = 
Õ
[-2], 
h
 =Üp[-1];

362 
E
;

363 
S0
 = 0, 
S1
 = 0, 
S2
 = 0, 
S3
 = 0, 
S4
 = 0,

364 
S5
 = 0, 
S6
 = 0, 
S7
 = 0, 
S8
 = 0;

366 #unde‡
STEP


367 
	#STEP
(
K
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
) \

368 i‡((
W
 = 
wt_Êﬂt
[
K
]) != 0.0) { \

369 
E
 = 
W
 * 
a
; 
S8
 += E; \

370 
E
 = 
W
 * 
b
; 
S7
 += E; \

371 
E
 = 
W
 * 
c
; 
S6
 += E; \

372 
E
 = 
W
 * 
d
; 
S5
 += E; \

373 
E
 = 
W
 * 
e
; 
S4
 += E; \

374 
E
 = 
W
 * 
f
; 
S3
 += E; \

375 
E
 = 
W
 * 
g
; 
S2
 += E; \

376 
E
 = 
W
 * 
h
; 
S1
 += E; \

377 
a
 = 
Õ
[
K
]; \

378 
E
 = 
W
 * 
a
; 
S0
 +E; } ◊ = 
Õ
[
K
])

	)

380 
	#STEP_A
(
K
Ë
	`STEP
(K, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
)

	)

381 
	#STEP_B
(
K
Ë
	`STEP
(K, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
)

	)

382 
	#STEP_C
(
K
Ë
	`STEP
(K, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
)

	)

383 
	#STEP_D
(
K
Ë
	`STEP
(K, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
)

	)

384 
	#STEP_E
(
K
Ë
	`STEP
(K, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
)

	)

385 
	#STEP_F
(
K
Ë
	`STEP
(K, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
)

	)

386 
	#STEP_G
(
K
Ë
	`STEP
(K, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
)

	)

387 
	#STEP_H
(
K
Ë
	`STEP
(K, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
)

	)

389 
	`STEP_A
–0); 
	`STEP_B
–1); 
	`STEP_C
–2); 
	`STEP_D
( 3);

390 
	`STEP_E
–4); 
	`STEP_F
–5); 
	`STEP_G
–6); 
	`STEP_H
( 7);

392 
	`STEP_A
–8); 
	`STEP_B
–9); 
	`STEP_C
(10); 
	`STEP_D
(11);

393 
	`STEP_E
(12); 
	`STEP_F
(13); 
	`STEP_G
(14); 
	`STEP_H
(15);

395 
	`STEP_A
(16); 
	`STEP_B
(17); 
	`STEP_C
(18); 
	`STEP_D
(19);

396 
	`STEP_E
(20); 
	`STEP_F
(21); 
	`STEP_G
(22); 
	`STEP_H
(23);

398 
	`STEP_A
(24); 
	`STEP_B
(25); 
	`STEP_C
(26); 
	`STEP_D
(27);

399 
	`STEP_E
(28); 
	`STEP_F
(29); 
	`STEP_G
(30); 
	`STEP_H
(31);

401 
	`STEP_A
(32); 
	`STEP_B
(33); 
	`STEP_C
(34); 
	`STEP_D
(35);

402 
	`STEP_E
(36); 
	`STEP_F
(37); 
	`STEP_G
(38); 
	`STEP_H
(39);

404 i‡(
S0
 > 
L_max
Ë{ L_max = S0; 
Nc
 = 
œmbda
; }

405 i‡(
S1
 > 
L_max
Ë{ L_max = S1; 
Nc
 = 
œmbda
 + 1; }

406 i‡(
S2
 > 
L_max
Ë{ L_max = S2; 
Nc
 = 
œmbda
 + 2; }

407 i‡(
S3
 > 
L_max
Ë{ L_max = S3; 
Nc
 = 
œmbda
 + 3; }

408 i‡(
S4
 > 
L_max
Ë{ L_max = S4; 
Nc
 = 
œmbda
 + 4; }

409 i‡(
S5
 > 
L_max
Ë{ L_max = S5; 
Nc
 = 
œmbda
 + 5; }

410 i‡(
S6
 > 
L_max
Ë{ L_max = S6; 
Nc
 = 
œmbda
 + 6; }

411 i‡(
S7
 > 
L_max
Ë{ L_max = S7; 
Nc
 = 
œmbda
 + 7; }

412 i‡(
S8
 > 
L_max
Ë{ L_max = S8; 
Nc
 = 
œmbda
 + 8; }

415 *
Nc_out
 = 
Nc
;

417 
L_max
 <<= 1;

421 
	`as£π
(
sˇl
 <= 100 && scal >= -100);

422 
L_max
 = L_max >> (6 - 
sˇl
);

424 
	`as£π
–
Nc
 <= 120 && Nc >= 40);

429 
L_powî
 = 0;

430 
k
 = 0; k <= 39; k++) {

432 
l⁄gw‹d
 
L_ãmp
;

434 
L_ãmp
 = 
	`SASR_W
–
dp
[
k
 - 
Nc
], 3 );

435 
L_powî
 +
L_ãmp
 * L_temp;

437 
L_powî
 <<= 1;

442 i‡(
L_max
 <= 0) {

443 *
bc_out
 = 0;

446 i‡(
L_max
 >
L_powî
) {

447 *
bc_out
 = 3;

451 
ãmp
 = 
	`gsm_n‹m
–
L_powî
 );

453 
R
 = 
	`SASR
–
L_max
 << 
ãmp
, 16 );

454 
S
 = 
	`SASR
–
L_powî
 << 
ãmp
, 16 );

462 
bc
 = 0; b¯<2; bc++Ëi‡(
R
 <
	`gsm_mu…
(
S
, 
gsm_DLB
[bc])) ;

463 *
bc_out
 = 
bc
;

464 
	}
}

468 
	$CÆcuœti⁄_of_the_LTP_∑ømëîs
 (

469 
w‹d
 * 
dö
,

470 
w‹d
 * 
dp
,

471 
w‹d
 * 
bc_out
,

472 
w‹d
 * 
Nc_out


475 
k
, 
œmbda
;

476 
w‹d
 
Nc
, 
bc
;

478 
wt_Êﬂt
[40];

479 
dp_Êﬂt_ba£
[120], * 
dp_Êﬂt
 = dp_float_base + 120;

481 
l⁄gw‹d
 
L_max
, 
L_powî
;

482 
w‹d
 
R
, 
S
, 
dmax
, 
sˇl
;

483 
w‹d
 
ãmp
;

487 
dmax
 = 0;

489 
k
 = 0; k <= 39; k++) {

490 
ãmp
 = 
dö
 [
k
] ;

491 
ãmp
 = 
	`GSM_ABS
 (temp) ;

492 i‡(
ãmp
 > 
dmax
) dmax =Åemp;

495 
ãmp
 = 0;

496 i‡(
dmax
 =0Ë
sˇl
 = 0;

498 
	`as£π
(
dmax
 > 0);

499 
ãmp
 = 
	`gsm_n‹m
–(
l⁄gw‹d
)
dmax
 << 16 );

502 i‡(
ãmp
 > 6Ë
sˇl
 = 0;

503 
sˇl
 = 6 - 
ãmp
;

505 
	`as£π
(
sˇl
 >= 0);

510 
k
 = 0; k < 40; k++Ë
wt_Êﬂt
[k] = 
	`SASR_W
 (
dö
 [k], 
sˇl
) ;

511 
k
 = -120; k < 0; k++Ë
dp_Êﬂt
[k] = 
dp
[k];

515 
L_max
 = 0;

516 
Nc
 = 40;

518 
œmbda
 = 40;Üambda <= 120;Üambda += 9) {

522 *
Õ
 = 
dp_Êﬂt
 - 
œmbda
;

524 
W
;

525 
a
 = 
Õ
[-8], 
b
 =Üp[-7], 
c
 =Üp[-6],

526 
d
 = 
Õ
[-5], 
e
 =Üp[-4], 
f
 =Üp[-3],

527 
g
 = 
Õ
[-2], 
h
 =Üp[-1];

528 
E
;

529 
S0
 = 0, 
S1
 = 0, 
S2
 = 0, 
S3
 = 0, 
S4
 = 0,

530 
S5
 = 0, 
S6
 = 0, 
S7
 = 0, 
S8
 = 0;

532 #unde‡
STEP


533 
	#STEP
(
K
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
) \

534 
W
 = 
wt_Êﬂt
[
K
]; \

535 
E
 = 
W
 * 
a
; 
S8
 += E; \

536 
E
 = 
W
 * 
b
; 
S7
 += E; \

537 
E
 = 
W
 * 
c
; 
S6
 += E; \

538 
E
 = 
W
 * 
d
; 
S5
 += E; \

539 
E
 = 
W
 * 
e
; 
S4
 += E; \

540 
E
 = 
W
 * 
f
; 
S3
 += E; \

541 
E
 = 
W
 * 
g
; 
S2
 += E; \

542 
E
 = 
W
 * 
h
; 
S1
 += E; \

543 
a
 = 
Õ
[
K
]; \

544 
E
 = 
W
 * 
a
; 
S0
 +
	)
E

546 
	#STEP_A
(
K
Ë
	`STEP
(K, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
)

	)

547 
	#STEP_B
(
K
Ë
	`STEP
(K, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
)

	)

548 
	#STEP_C
(
K
Ë
	`STEP
(K, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
)

	)

549 
	#STEP_D
(
K
Ë
	`STEP
(K, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
)

	)

550 
	#STEP_E
(
K
Ë
	`STEP
(K, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
)

	)

551 
	#STEP_F
(
K
Ë
	`STEP
(K, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
)

	)

552 
	#STEP_G
(
K
Ë
	`STEP
(K, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
)

	)

553 
	#STEP_H
(
K
Ë
	`STEP
(K, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
)

	)

555 
	`STEP_A
–0); 
	`STEP_B
–1); 
	`STEP_C
–2); 
	`STEP_D
( 3);

556 
	`STEP_E
–4); 
	`STEP_F
–5); 
	`STEP_G
–6); 
	`STEP_H
( 7);

558 
	`STEP_A
–8); 
	`STEP_B
–9); 
	`STEP_C
(10); 
	`STEP_D
(11);

559 
	`STEP_E
(12); 
	`STEP_F
(13); 
	`STEP_G
(14); 
	`STEP_H
(15);

561 
	`STEP_A
(16); 
	`STEP_B
(17); 
	`STEP_C
(18); 
	`STEP_D
(19);

562 
	`STEP_E
(20); 
	`STEP_F
(21); 
	`STEP_G
(22); 
	`STEP_H
(23);

564 
	`STEP_A
(24); 
	`STEP_B
(25); 
	`STEP_C
(26); 
	`STEP_D
(27);

565 
	`STEP_E
(28); 
	`STEP_F
(29); 
	`STEP_G
(30); 
	`STEP_H
(31);

567 
	`STEP_A
(32); 
	`STEP_B
(33); 
	`STEP_C
(34); 
	`STEP_D
(35);

568 
	`STEP_E
(36); 
	`STEP_F
(37); 
	`STEP_G
(38); 
	`STEP_H
(39);

570 i‡(
S0
 > 
L_max
Ë{ L_max = S0; 
Nc
 = 
œmbda
; }

571 i‡(
S1
 > 
L_max
Ë{ L_max = S1; 
Nc
 = 
œmbda
 + 1; }

572 i‡(
S2
 > 
L_max
Ë{ L_max = S2; 
Nc
 = 
œmbda
 + 2; }

573 i‡(
S3
 > 
L_max
Ë{ L_max = S3; 
Nc
 = 
œmbda
 + 3; }

574 i‡(
S4
 > 
L_max
Ë{ L_max = S4; 
Nc
 = 
œmbda
 + 4; }

575 i‡(
S5
 > 
L_max
Ë{ L_max = S5; 
Nc
 = 
œmbda
 + 5; }

576 i‡(
S6
 > 
L_max
Ë{ L_max = S6; 
Nc
 = 
œmbda
 + 6; }

577 i‡(
S7
 > 
L_max
Ë{ L_max = S7; 
Nc
 = 
œmbda
 + 7; }

578 i‡(
S8
 > 
L_max
Ë{ L_max = S8; 
Nc
 = 
œmbda
 + 8; }

580 *
Nc_out
 = 
Nc
;

582 
L_max
 <<= 1;

586 
	`as£π
(
sˇl
 <= 100 && scal >= -100);

587 
L_max
 = L_max >> (6 - 
sˇl
);

589 
	`as£π
–
Nc
 <= 120 && Nc >= 40);

594 
L_powî
 = 0;

595 
k
 = 0; k <= 39; k++) {

597 
l⁄gw‹d
 
L_ãmp
;

599 
L_ãmp
 = 
	`SASR_W
–
dp
[
k
 - 
Nc
], 3 );

600 
L_powî
 +
L_ãmp
 * L_temp;

602 
L_powî
 <<= 1;

607 i‡(
L_max
 <= 0) {

608 *
bc_out
 = 0;

611 i‡(
L_max
 >
L_powî
) {

612 *
bc_out
 = 3;

616 
ãmp
 = 
	`gsm_n‹m
–
L_powî
 );

618 
R
 = 
	`SASR_L
 ( 
L_max
 << 
ãmp
, 16 );

619 
S
 = 
	`SASR_L
 ( 
L_powî
 << 
ãmp
, 16 );

627 
bc
 = 0; b¯<2; bc++Ëi‡(
R
 <
	`gsm_mu…
(
S
, 
gsm_DLB
[bc])) ;

628 *
bc_out
 = 
bc
;

629 
	}
}

631 #ifdef 
FAST


632 #ifdef 
LTP_CUT


634 
	$Cut_Fa°_CÆcuœti⁄_of_the_LTP_∑ømëîs
 (

635 
gsm_°©e
 * 
°
,

636 
w‹d
 * 
d
,

637 
w‹d
 * 
dp
,

638 
w‹d
 * 
bc_out
,

639 
w‹d
 * 
Nc_out


642 
k
, 
œmbda
;

643 
wt_Êﬂt
;

644 
w‹d
 
Nc
, 
bc
;

645 
w‹d
 
wt_max
, 
be°_k
, 
…p_cut
;

647 
dp_Êﬂt_ba£
[120], * 
dp_Êﬂt
 = dp_float_base + 120;

649 
L_ªsu…
, 
L_max
, 
L_powî
;

651 
wt_max
 = 0;

653 
k
 = 0; k < 40; ++k) {

654 i‡–
d
[
k
] > 
wt_max
Ëwt_max = d[
be°_k
 = k];

655 i‡(-
d
[
k
] > 
wt_max
Ëwt_max = -d[
be°_k
 = k];

658 
	`as£π
(
wt_max
 >= 0);

659 
wt_Êﬂt
 = ()
wt_max
;

661 
k
 = -120; k < 0; ++kË
dp_Êﬂt
[k] = ()
dp
[k];

665 
L_max
 = 0;

666 
Nc
 = 40;

668 
œmbda
 = 40;Üambda <= 120;Üambda++) {

669 
L_ªsu…
 = 
wt_Êﬂt
 * 
dp_Êﬂt
[
be°_k
 - 
œmbda
];

670 i‡(
L_ªsu…
 > 
L_max
) {

671 
Nc
 = 
œmbda
;

672 
L_max
 = 
L_ªsu…
;

676 *
Nc_out
 = 
Nc
;

677 i‡(
L_max
 <= 0.) {

678 *
bc_out
 = 0;

685 
dp_Êﬂt
 -
Nc
;

686 
L_powî
 = 0;

687 
k
 = 0; k < 40; ++k) {

688 
f
 = 
dp_Êﬂt
[
k
];

689 
L_powî
 +
f
 * f;

692 i‡(
L_max
 >
L_powî
) {

693 *
bc_out
 = 3;

701 
œmbda
 = 
L_max
 / 
L_powî
 * 32768.;

702 
bc
 = 0; b¯<2; ++bcËi‡(
œmbda
 <
gsm_DLB
[bc]) ;

703 *
bc_out
 = 
bc
;

704 
	}
}

708 
	$Fa°_CÆcuœti⁄_of_the_LTP_∑ømëîs
 (

709 
w‹d
 * 
dö
,

710 
w‹d
 * 
dp
,

711 
w‹d
 * 
bc_out
,

712 
w‹d
 * 
Nc_out


715 
k
, 
œmbda
;

716 
w‹d
 
Nc
, 
bc
;

718 
wt_Êﬂt
[40];

719 
dp_Êﬂt_ba£
[120], * 
dp_Êﬂt
 = dp_float_base + 120;

721 
L_max
, 
L_powî
;

723 
k
 = 0; k < 40; ++kË
wt_Êﬂt
[k] = (Ë
dö
 [k] ;

724 
k
 = -120; k < 0; ++kË
dp_Êﬂt
[k] = (Ë
dp
 [k] ;

728 
L_max
 = 0;

729 
Nc
 = 40;

731 
œmbda
 = 40;Üambda <= 120;Üambda += 9) {

735 *
Õ
 = 
dp_Êﬂt
 - 
œmbda
;

737 
W
;

738 
a
 = 
Õ
[-8], 
b
 =Üp[-7], 
c
 =Üp[-6],

739 
d
 = 
Õ
[-5], 
e
 =Üp[-4], 
f
 =Üp[-3],

740 
g
 = 
Õ
[-2], 
h
 =Üp[-1];

741 
E
;

742 
S0
 = 0, 
S1
 = 0, 
S2
 = 0, 
S3
 = 0, 
S4
 = 0,

743 
S5
 = 0, 
S6
 = 0, 
S7
 = 0, 
S8
 = 0;

745 #unde‡
STEP


746 
	#STEP
(
K
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
) \

747 
W
 = 
wt_Êﬂt
[
K
]; \

748 
E
 = 
W
 * 
a
; 
S8
 += E; \

749 
E
 = 
W
 * 
b
; 
S7
 += E; \

750 
E
 = 
W
 * 
c
; 
S6
 += E; \

751 
E
 = 
W
 * 
d
; 
S5
 += E; \

752 
E
 = 
W
 * 
e
; 
S4
 += E; \

753 
E
 = 
W
 * 
f
; 
S3
 += E; \

754 
E
 = 
W
 * 
g
; 
S2
 += E; \

755 
E
 = 
W
 * 
h
; 
S1
 += E; \

756 
a
 = 
Õ
[
K
]; \

757 
E
 = 
W
 * 
a
; 
S0
 +
	)
E

759 
	#STEP_A
(
K
Ë
	`STEP
(K, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
)

	)

760 
	#STEP_B
(
K
Ë
	`STEP
(K, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
)

	)

761 
	#STEP_C
(
K
Ë
	`STEP
(K, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
)

	)

762 
	#STEP_D
(
K
Ë
	`STEP
(K, 
d
, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
)

	)

763 
	#STEP_E
(
K
Ë
	`STEP
(K, 
e
, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
)

	)

764 
	#STEP_F
(
K
Ë
	`STEP
(K, 
f
, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
)

	)

765 
	#STEP_G
(
K
Ë
	`STEP
(K, 
g
, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
)

	)

766 
	#STEP_H
(
K
Ë
	`STEP
(K, 
h
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
)

	)

768 
	`STEP_A
–0); 
	`STEP_B
–1); 
	`STEP_C
–2); 
	`STEP_D
( 3);

769 
	`STEP_E
–4); 
	`STEP_F
–5); 
	`STEP_G
–6); 
	`STEP_H
( 7);

771 
	`STEP_A
–8); 
	`STEP_B
–9); 
	`STEP_C
(10); 
	`STEP_D
(11);

772 
	`STEP_E
(12); 
	`STEP_F
(13); 
	`STEP_G
(14); 
	`STEP_H
(15);

774 
	`STEP_A
(16); 
	`STEP_B
(17); 
	`STEP_C
(18); 
	`STEP_D
(19);

775 
	`STEP_E
(20); 
	`STEP_F
(21); 
	`STEP_G
(22); 
	`STEP_H
(23);

777 
	`STEP_A
(24); 
	`STEP_B
(25); 
	`STEP_C
(26); 
	`STEP_D
(27);

778 
	`STEP_E
(28); 
	`STEP_F
(29); 
	`STEP_G
(30); 
	`STEP_H
(31);

780 
	`STEP_A
(32); 
	`STEP_B
(33); 
	`STEP_C
(34); 
	`STEP_D
(35);

781 
	`STEP_E
(36); 
	`STEP_F
(37); 
	`STEP_G
(38); 
	`STEP_H
(39);

783 i‡(
S0
 > 
L_max
Ë{ L_max = S0; 
Nc
 = 
œmbda
; }

784 i‡(
S1
 > 
L_max
Ë{ L_max = S1; 
Nc
 = 
œmbda
 + 1; }

785 i‡(
S2
 > 
L_max
Ë{ L_max = S2; 
Nc
 = 
œmbda
 + 2; }

786 i‡(
S3
 > 
L_max
Ë{ L_max = S3; 
Nc
 = 
œmbda
 + 3; }

787 i‡(
S4
 > 
L_max
Ë{ L_max = S4; 
Nc
 = 
œmbda
 + 4; }

788 i‡(
S5
 > 
L_max
Ë{ L_max = S5; 
Nc
 = 
œmbda
 + 5; }

789 i‡(
S6
 > 
L_max
Ë{ L_max = S6; 
Nc
 = 
œmbda
 + 6; }

790 i‡(
S7
 > 
L_max
Ë{ L_max = S7; 
Nc
 = 
œmbda
 + 7; }

791 i‡(
S8
 > 
L_max
Ë{ L_max = S8; 
Nc
 = 
œmbda
 + 8; }

793 *
Nc_out
 = 
Nc
;

795 i‡(
L_max
 <= 0.) {

796 *
bc_out
 = 0;

803 
dp_Êﬂt
 -
Nc
;

804 
L_powî
 = 0;

805 
k
 = 0; k < 40; ++k) {

806 
f
 = 
dp_Êﬂt
[
k
];

807 
L_powî
 +
f
 * f;

810 i‡(
L_max
 >
L_powî
) {

811 *
bc_out
 = 3;

819 
œmbda
 = 
L_max
 / 
L_powî
 * 32768.;

820 
bc
 = 0; b¯<2; ++bcËi‡(
œmbda
 <
gsm_DLB
[bc]) ;

821 *
bc_out
 = 
bc
;

822 
	}
}

830 
	$L⁄g_ãrm_™Æysis_fûãrög
 (

831 
w‹d
 
bc
,

832 
w‹d
 
Nc
,

833 
w‹d
 * 
dp
,

834 
w‹d
 * 
d
,

835 
w‹d
 * 
dµ
,

836 
w‹d
 * 
e


845 
k
;

847 #unde‡
STEP


848 
	#STEP
(
BP
) \

849 
k
 = 0; k <= 39; k++) { \

850 
dµ
[
k
] = 
	`GSM_MULT_R
–
BP
, 
dp
[k - 
Nc
]); \

851 
e
[
k
] = 
	`GSM_SUB
–
d
[k], 
dµ
[k] ); \

852 }

	)

854 
bc
) {

855 0: 
	`STEP
( 3277 ); ;

856 1: 
	`STEP
( 11469 ); ;

857 2: 
	`STEP
( 21299 ); ;

858 3: 
	`STEP
( 32767 ); ;

860 
	}
}

862 
	$Gsm_L⁄g_Tîm_Pªdi˘‹
 (

864 
gsm_°©e
 * 
S
,

866 
w‹d
 * 
d
,

867 
w‹d
 * 
dp
,

869 
w‹d
 * 
e
,

870 
w‹d
 * 
dµ
,

871 
w‹d
 * 
Nc
,

872 
w‹d
 * 
bc


875 
	`as£π
–
d
 );ás£π–
dp
 );ás£π–
e
 );

876 
	`as£π
–
dµ
);ás£π–
Nc
 );ás£π–
bc
 );

878 #i‡
	`deföed
(
FAST
Ë&& deföed(
USE_FLOAT_MUL
)

879 i‡(
S
->
Á°
)

880 #i‡ 
	`deföed
 (
LTP_CUT
)

881 i‡(
S
->
…p_cut
)

882 
	`Cut_Fa°_CÆcuœti⁄_of_the_LTP_∑ømëîs
(
S
,

883 
d
, 
dp
, 
bc
, 
Nc
);

886 
	`Fa°_CÆcuœti⁄_of_the_LTP_∑ømëîs
(
d
, 
dp
, 
bc
, 
Nc
 );

889 #ifde‡
LTP_CUT


890 i‡(
S
->
…p_cut
)

891 
	`Cut_CÆcuœti⁄_of_the_LTP_∑ømëîs
(
S
, 
d
, 
dp
, 
bc
, 
Nc
);

894 
	`CÆcuœti⁄_of_the_LTP_∑ømëîs
(
d
, 
dp
, 
bc
, 
Nc
);

896 
	`L⁄g_ãrm_™Æysis_fûãrög
–*
bc
, *
Nc
, 
dp
, 
d
, 
dµ
, 
e
 );

897 
	}
}

900 
	$Gsm_L⁄g_Tîm_Sy¡hesis_Fûãrög
 (

901 
gsm_°©e
 * 
S
,

903 
w‹d
 
N¸
,

904 
w‹d
 
b¸
,

905 
w‹d
 * 
îp
,

906 
w‹d
 * 
dΩ


914 
k
;

915 
w‹d
 
bΩ
, 
dΩp
, 
Nr
;

919 
Nr
 = 
N¸
 < 40 || N¸ > 120 ? 
S
->
ƒp
 : Ncr;

920 
S
->
ƒp
 = 
Nr
;

921 
	`as£π
(
Nr
 >= 40 && Nr <= 120);

925 
bΩ
 = 
gsm_QLB
[ 
b¸
 ];

930 
	`as£π
(
bΩ
 !
MIN_WORD
);

932 
k
 = 0; k <= 39; k++) {

933 
dΩp
 = 
	`GSM_MULT_R
–
bΩ
, 
dΩ
[ 
k
 - 
Nr
 ] );

934 
dΩ
[
k
] = 
	`GSM_ADD
–
îp
[k], 
dΩp
 );

942 
k
 = 0; k <119; k++Ë
dΩ
[ -120 + k ] = drp[ -80 + k ];

943 
	}
}

	@lpc.c

7 
	~<°dio.h
>

8 
	~<as£π.h
>

10 
	~"gsm610_¥iv.h
"

12 
	~"gsm.h
"

21 
	$Autoc‹ªœti⁄
 (

22 
w‹d
 * 
s
,

23 
l⁄gw‹d
 * 
L_ACF
)

29 
k
, 
i
;

31 
w‹d
 
ãmp
, 
smax
, 
sˇœuto
;

33 #ifdef 
USE_FLOAT_MUL


34 
Êﬂt_s
[160];

42 
smax
 = 0;

43 
k
 = 0; k <= 159; k++) {

44 
ãmp
 = 
	`GSM_ABS
–
s
[
k
] );

45 i‡(
ãmp
 > 
smax
) smax =Åemp;

50 i‡(
smax
 =0Ë
sˇœuto
 = 0;

52 
	`as£π
(
smax
 > 0);

53 
sˇœuto
 = 4 - 
	`gsm_n‹m
–(
l⁄gw‹d
)
smax
 << 16 );

59 i‡(
sˇœuto
 > 0) {

61 #ifde‡
USE_FLOAT_MUL


62 
	#SCALE
(
n
) \

63 
n
: 
k
 = 0; k <= 159; k++) \

64 
Êﬂt_s
[
k
] = () \

65 (
s
[
k
] = 
	`GSM_MULT_R
(s[k], 16384 >> (
n
-1)));\

66 ;

	)

68 
	#SCALE
(
n
) \

69 
n
: 
k
 = 0; k <= 159; k++) \

70 
s
[
k
] = 
	`GSM_MULT_R
–s[k], 16384 >> (
n
-1) );\

71 ;

	)

74 
sˇœuto
) {

75 
	`SCALE
(1)

76 
	`SCALE
(2)

77 
	`SCALE
(3)

78 
	`SCALE
(4)

80 #unde‡
SCALE


82 #ifdef 
USE_FLOAT_MUL


83 
k
 = 0; k <159; k++Ë
Êﬂt_s
[k] = (Ë
s
[k];

89 #ifdef 
USE_FLOAT_MUL


90 * 
•
 = 
Êﬂt_s
;

91 
¶
 = *
•
;

93 
	#STEP
(
k
Ë
L_ACF
[k] +(
l⁄gw‹d
)(
¶
 * 
•
[ -(kË]);

	)

95 
w‹d
 * 
•
 = 
s
;

96 
w‹d
 
¶
 = *
•
;

98 
	#STEP
(
k
Ë
L_ACF
[k] +((
l⁄gw‹d
)
¶
 * 
•
[ -(kË]);

	)

101 
	#NEXTI
 
¶
 = *++
•


	)

104 
k
 = 9; k--; 
L_ACF
[k] = 0) ;

106 
	`STEP
 (0);

107 
NEXTI
;

108 
	`STEP
(0); STEP(1);

109 
NEXTI
;

110 
	`STEP
(0); STEP(1); STEP(2);

111 
NEXTI
;

112 
	`STEP
(0); STEP(1); STEP(2); STEP(3);

113 
NEXTI
;

114 
	`STEP
(0); STEP(1); STEP(2); STEP(3); STEP(4);

115 
NEXTI
;

116 
	`STEP
(0); STEP(1); STEP(2); STEP(3); STEP(4); STEP(5);

117 
NEXTI
;

118 
	`STEP
(0); STEP(1); STEP(2); STEP(3); STEP(4); STEP(5); STEP(6);

119 
NEXTI
;

120 
	`STEP
(0); STEP(1); STEP(2); STEP(3); STEP(4); STEP(5); STEP(6); STEP(7);

122 
i
 = 8; i <= 159; i++) {

124 
NEXTI
;

126 
	`STEP
(0);

127 
	`STEP
(1); STEP(2); STEP(3); STEP(4);

128 
	`STEP
(5); STEP(6); STEP(7); STEP(8);

131 
k
 = 9; k--; 
L_ACF
[k] <<= 1) ;

136 i‡(
sˇœuto
 > 0) {

137 
	`as£π
(
sˇœuto
 <= 4);

138 
k
 = 160; k--; *
s
++ <<
sˇœuto
) ;

140 
	}
}

142 #i‡
deföed
(
USE_FLOAT_MUL
Ë&& deföed(
FAST
)

144 
	$Fa°_Autoc‹ªœti⁄
 (

145 
w‹d
 * 
s
,

146 
l⁄gw‹d
 * 
L_ACF
)

148 
k
, 
i
;

149 
f_L_ACF
[9];

150 
sˇÀ
;

152 
s_f
[160];

153 *
sf
 = 
s_f
;

155 
i
 = 0; i < 160; ++iË
sf
[i] = 
s
[i];

156 
k
 = 0; k <= 8; k++) {

157 
L_ãmp2
 = 0;

158 *
sÊ
 = 
sf
 - 
k
;

159 
i
 = 
k
; i < 160; ++iË
L_ãmp2
 +
sf
[i] * 
sÊ
[i];

160 
f_L_ACF
[
k
] = 
L_ãmp2
;

162 
sˇÀ
 = 
MAX_LONGWORD
 / 
f_L_ACF
[0];

164 
k
 = 0; k <= 8; k++) {

165 
L_ACF
[
k
] = 
f_L_ACF
[k] * 
sˇÀ
;

167 
	}
}

172 
	$ReÊe˘i⁄_c€fficõ¡s
 (

173 
l⁄gw‹d
 * 
L_ACF
,

174 
w‹d
 * 
r


177 
i
, 
m
, 
n
;

178 
w‹d
 
ãmp
;

179 
w‹d
 
ACF
[9];

180 
w‹d
 
P
[ 9];

181 
w‹d
 
K
[ 9];

186 i‡(
L_ACF
[0] == 0) {

187 
i
 = 8; i--; *
r
++ = 0) ;

191 
	`as£π
–
L_ACF
[0] != 0 );

192 
ãmp
 = 
	`gsm_n‹m
–
L_ACF
[0] );

194 
	`as£π
(
ãmp
 >= 0 &&Åemp < 32);

197 
i
 = 0; i <8; i++Ë
ACF
[i] = 
	`SASR_L
–
L_ACF
[i] << 
ãmp
, 16 );

202 
i
 = 1; i <7; i++Ë
K
[ i ] = 
ACF
[ i ];

203 
i
 = 0; i <8; i++Ë
P
[ i ] = 
ACF
[ i ];

207 
n
 = 1;Ç <8;Ç++, 
r
++) {

209 
ãmp
 = 
P
[1];

210 
ãmp
 = 
	`GSM_ABS
(temp);

211 i‡(
P
[0] < 
ãmp
) {

212 
i
 = 
n
; i <8; i++Ë*
r
++ = 0;

216 *
r
 = 
	`gsm_div
–
ãmp
, 
P
[0] );

218 
	`as£π
(*
r
 >= 0);

219 i‡(
P
[1] > 0Ë*
r
 = -*r;

220 
	`as£π
 (*
r
 !
MIN_WORD
);

221 i‡(
n
 == 8) ;

225 
ãmp
 = 
	`GSM_MULT_R
–
P
[1], *
r
 );

226 
P
[0] = 
	`GSM_ADD
–P[0], 
ãmp
 );

228 
m
 = 1; m <8 - 
n
; m++) {

229 
ãmp
 = 
	`GSM_MULT_R
–
K
[ 
m
 ], *
r
 );

230 
P
[
m
] = 
	`GSM_ADD
–P[ m+1 ], 
ãmp
 );

232 
ãmp
 = 
	`GSM_MULT_R
–
P
[ 
m
+1 ], *
r
 );

233 
K
[
m
] = 
	`GSM_ADD
–K[ m ], 
ãmp
 );

236 
	}
}

240 
	$Tønsf‹m©i⁄_to_Log_Aªa_R©ios
 (

241 
w‹d
 * 
r


251 
w‹d
 
ãmp
;

252 
i
;

257 
i
 = 1; i <8; i++, 
r
++) {

259 
ãmp
 = *
r
;

260 
ãmp
 = 
	`GSM_ABS
(temp);

261 
	`as£π
(
ãmp
 >= 0);

263 i‡(
ãmp
 < 22118) {

264 
ãmp
 >>= 1;

265 } i‡(
ãmp
 < 31130) {

266 
	`as£π
–
ãmp
 >= 11059 );

267 
ãmp
 -= 11059;

269 
	`as£π
–
ãmp
 >= 26112 );

270 
ãmp
 -= 26112;

271 
ãmp
 <<= 2;

274 *
r
 = *∏< 0 ? -
ãmp
 :Åemp;

275 
	`as£π
–*
r
 !
MIN_WORD
 );

277 
	}
}

281 
	$Qu™tiz©i⁄_™d_codög
 (

282 
w‹d
 * 
LAR


285 
w‹d
 
ãmp
;

296 #unde‡
STEP


297 
	#STEP
–
A
, 
B
, 
MAC
, 
MIC
 ) \

298 
ãmp
 = 
	`GSM_MULT
–
A
, *
LAR
 ); \

299 
ãmp
 = 
	`GSM_ADD
–ãmp, 
B
 ); \

300 
ãmp
 = 
	`GSM_ADD
(Åemp, 256 ); \

301 
ãmp
 = 
	`SASR_W
(Åemp, 9 ); \

302 *
LAR
 = 
ãmp
>
MAC
 ? MAC - 
MIC
 : (temp<MIC ? 0 :Åemp - MIC); \

303 
LAR
++;

	)

305 
	`STEP
( 20480, 0, 31, -32 );

306 
	`STEP
( 20480, 0, 31, -32 );

307 
	`STEP
( 20480, 2048, 15, -16 );

308 
	`STEP
( 20480, -2560, 15, -16 );

310 
	`STEP
( 13964, 94, 7, -8 );

311 
	`STEP
( 15360, -1792, 7, -8 );

312 
	`STEP
( 8534, -341, 3, -4 );

313 
	`STEP
( 9036, -1144, 3, -4 );

315 #unde‡
STEP


316 
	}
}

318 
	$Gsm_LPC_A«lysis
 (

319 
gsm_°©e
 *
S
,

320 
w‹d
 * 
s
,

321 
w‹d
 * 
LARc
)

323 
l⁄gw‹d
 
L_ACF
[9];

325 #i‡
	`deföed
(
USE_FLOAT_MUL
Ë&& deföed(
FAST
)

326 i‡(
S
->
Á°
Ë
	`Fa°_Autoc‹ªœti⁄
 (
s
, 
L_ACF
 );

329 
	`Autoc‹ªœti⁄
 (
s
, 
L_ACF
 );

330 
	`ReÊe˘i⁄_c€fficõ¡s
 (
L_ACF
, 
LARc
 );

331 
	`Tønsf‹m©i⁄_to_Log_Aªa_R©ios
 (
LARc
);

332 
	`Qu™tiz©i⁄_™d_codög
 (
LARc
);

333 
	}
}

	@preprocess.c

7 
	~<°dio.h
>

8 
	~<as£π.h
>

10 
	~"gsm610_¥iv.h
"

12 
	~"gsm.h
"

31 
	$Gsm_Pª¥o˚ss
 (

32 
gsm_°©e
 * 
S
,

33 
w‹d
 * 
s
,

34 
w‹d
 * 
so
 )

37 
w‹d
 
z1
 = 
S
->z1;

38 
l⁄gw‹d
 
L_z2
 = 
S
->L_z2;

39 
w‹d
 
mp
 = 
S
->mp;

41 
w‹d
 
s1
;

42 
l⁄gw‹d
 
L_s2
;

44 
l⁄gw‹d
 
L_ãmp
;

46 
w‹d
 
m•
, 
l•
;

47 
w‹d
 
SO
;

49 
k
 = 160;

51 
k
--) {

55 
SO
 = 
	`SASR_W
–*
s
, 3 ) << 2;

56 
s
++;

58 
	`as£π
 (
SO
 >= -0x4000);

59 
	`as£π
 (
SO
 <= 0x3FFC);

72 
s1
 = 
SO
 - 
z1
;

73 
z1
 = 
SO
;

75 
	`as£π
(
s1
 !
MIN_WORD
);

79 
L_s2
 = 
s1
;

80 
L_s2
 <<= 15;

85 
m•
 = 
	`SASR_L
–
L_z2
, 15 );

86 
l•
 = 
L_z2
-((
l⁄gw‹d
)
m•
<<15);

88 
L_s2
 +
	`GSM_MULT_R
–
l•
, 32735 );

89 
L_ãmp
 = (
l⁄gw‹d
)
m•
 * 32735;

90 
L_z2
 = 
	`GSM_L_ADD
–
L_ãmp
, 
L_s2
 );

94 
L_ãmp
 = 
	`GSM_L_ADD
–
L_z2
, 16384 );

99 
m•
 = 
	`GSM_MULT_R
–
mp
, -28180 );

100 
mp
 = 
	`SASR_L
–
L_ãmp
, 15 );

101 *
so
++ = 
	`GSM_ADD
–
mp
, 
m•
 );

104 
S
->
z1
 = z1;

105 
S
->
L_z2
 = L_z2;

106 
S
->
mp
 = mp;

107 
	}
}

	@rpe.c

7 
	~<°dio.h
>

8 
	~<as£π.h
>

10 
	~"gsm610_¥iv.h
"

12 
	~"gsm.h
"

19 
	$Weightög_fûãr
 (

20 
w‹d
 * 
e
,

21 
w‹d
 * 
x


32 
l⁄gw‹d
 
L_ªsu…
;

33 
k
 ;

45 
e
 -= 5;

49 
k
 = 0; k <= 39; k++) {

51 
L_ªsu…
 = 8192 >> 1;

59 #unde‡
STEP


60 
	#STEP
–
i
, 
H
 ) (
e
[ 
k
 + i ] * (
l⁄gw‹d
)H)

	)

67 #ifdef 
STUPID_COMPILER


68 
L_ªsu…
 +
	`STEP
( 0, -134 ) ;

69 
L_ªsu…
 +
	`STEP
( 1, -374 ) ;

71 
L_ªsu…
 +
	`STEP
( 3, 2054 ) ;

72 
L_ªsu…
 +
	`STEP
( 4, 5741 ) ;

73 
L_ªsu…
 +
	`STEP
( 5, 8192 ) ;

74 
L_ªsu…
 +
	`STEP
( 6, 5741 ) ;

75 
L_ªsu…
 +
	`STEP
( 7, 2054 ) ;

77 
L_ªsu…
 +
	`STEP
( 9, -374 ) ;

78 
L_ªsu…
 +
	`STEP
( 10, -134 ) ;

80 
L_ªsu…
 +=

81 
	`STEP
( 0, -134 )

82 + 
	`STEP
( 1, -374 )

84 + 
	`STEP
( 3, 2054 )

85 + 
	`STEP
( 4, 5741 )

86 + 
	`STEP
( 5, 8192 )

87 + 
	`STEP
( 6, 5741 )

88 + 
	`STEP
( 7, 2054 )

90 + 
	`STEP
( 9, -374 )

91 + 
	`STEP
(10, -134 )

105 
L_ªsu…
 = 
	`SASR_L
( L_result, 13 );

106 
x
[
k
] = ( 
L_ªsu…
 < 
MIN_WORD
 ? MIN_WORD

107 : (
L_ªsu…
 > 
MAX_WORD
 ? MAX_WORD : L_result ));

109 
	}
}

113 
	$RPE_grid_£À˘i⁄
 (

114 
w‹d
 * 
x
,

115 
w‹d
 * 
xM
,

116 
w‹d
 * 
Mc_out


124 
i
;

125 
l⁄gw‹d
 
L_ªsu…
, 
L_ãmp
;

126 
l⁄gw‹d
 
EM
;

127 
w‹d
 
Mc
;

129 
l⁄gw‹d
 
L_comm⁄_0_3
;

131 
EM
 = 0;

132 
Mc
 = 0;

155 #unde‡
STEP


156 
	#STEP
–
m
, 
i
 ) 
L_ãmp
 = 
	`SASR_W
–
x
[m + 3 * i], 2 ); \

157 
L_ªsu…
 +
L_ãmp
 * L_ãmp;

	)

161 
L_ªsu…
 = 0;

162 
	`STEP
( 0, 1 ); STEP( 0, 2 ); STEP( 0, 3 ); STEP( 0, 4 );

163 
	`STEP
( 0, 5 ); STEP( 0, 6 ); STEP( 0, 7 ); STEP( 0, 8 );

164 
	`STEP
( 0, 9 ); STEP( 0, 10); STEP( 0, 11); STEP( 0, 12);

165 
L_comm⁄_0_3
 = 
L_ªsu…
;

169 
	`STEP
( 0, 0 );

170 
L_ªsu…
 <<= 1;

171 
EM
 = 
L_ªsu…
;

175 
L_ªsu…
 = 0;

176 
	`STEP
( 1, 0 );

177 
	`STEP
( 1, 1 ); STEP( 1, 2 ); STEP( 1, 3 ); STEP( 1, 4 );

178 
	`STEP
( 1, 5 ); STEP( 1, 6 ); STEP( 1, 7 ); STEP( 1, 8 );

179 
	`STEP
( 1, 9 ); STEP( 1, 10); STEP( 1, 11); STEP( 1, 12);

180 
L_ªsu…
 <<= 1;

181 i‡(
L_ªsu…
 > 
EM
) {

182 
Mc
 = 1;

183 
EM
 = 
L_ªsu…
;

188 
L_ªsu…
 = 0;

189 
	`STEP
( 2, 0 );

190 
	`STEP
( 2, 1 ); STEP( 2, 2 ); STEP( 2, 3 ); STEP( 2, 4 );

191 
	`STEP
( 2, 5 ); STEP( 2, 6 ); STEP( 2, 7 ); STEP( 2, 8 );

192 
	`STEP
( 2, 9 ); STEP( 2, 10); STEP( 2, 11); STEP( 2, 12);

193 
L_ªsu…
 <<= 1;

194 i‡(
L_ªsu…
 > 
EM
) {

195 
Mc
 = 2;

196 
EM
 = 
L_ªsu…
;

201 
L_ªsu…
 = 
L_comm⁄_0_3
;

202 
	`STEP
( 3, 12 );

203 
L_ªsu…
 <<= 1;

204 i‡(
L_ªsu…
 > 
EM
) {

205 
Mc
 = 3;

206 
EM
 = 
L_ªsu…
;

214 
i
 = 0; i <12; i ++Ë
xM
[i] = 
x
[
Mc
 + 3*i];

215 *
Mc_out
 = 
Mc
;

216 
	}
}

220 
	$APCM_qu™tiz©i⁄_xmaxc_to_exp_m™t
 (

221 
w‹d
 
xmaxc
,

222 
w‹d
 * 
exp⁄_out
,

223 
w‹d
 * 
m™t_out
 )

225 
w‹d
 
exp⁄
, 
m™t
;

230 
exp⁄
 = 0;

231 i‡(
xmaxc
 > 15Ë
exp⁄
 = 
	`SASR_W
(xmaxc, 3) - 1;

232 
m™t
 = 
xmaxc
 - (
exp⁄
 << 3);

234 i‡(
m™t
 == 0) {

235 
exp⁄
 = -4;

236 
m™t
 = 7;

239 
m™t
 <= 7) {

240 
m™t
 = mant << 1 | 1;

241 
exp⁄
--;

243 
m™t
 -= 8;

246 
	`as£π
–
exp⁄
 >= -4 &&Éxpon <= 6 );

247 
	`as£π
–
m™t
 >= 0 && mant <= 7 );

249 *
exp⁄_out
 = 
exp⁄
;

250 *
m™t_out
 = 
m™t
;

251 
	}
}

253 
	$APCM_qu™tiz©i⁄
 (

254 
w‹d
 * 
xM
,

255 
w‹d
 * 
xMc
,

256 
w‹d
 * 
m™t_out
,

257 
w‹d
 * 
exp⁄_out
,

258 
w‹d
 * 
xmaxc_out


261 
i
, 
ôe°
;

263 
w‹d
 
xmax
, 
xmaxc
, 
ãmp
, 
ãmp1
, 
ãmp2
;

264 
w‹d
 
exp⁄
, 
m™t
;

270 
xmax
 = 0;

271 
i
 = 0; i <= 12; i++) {

272 
ãmp
 = 
xM
[
i
];

273 
ãmp
 = 
	`GSM_ABS
(temp);

274 i‡(
ãmp
 > 
xmax
) xmax =Åemp;

280 
exp⁄
 = 0;

281 
ãmp
 = 
	`SASR_W
–
xmax
, 9 );

282 
ôe°
 = 0;

284 
i
 = 0; i <= 5; i++) {

286 
ôe°
 |(
ãmp
 <= 0);

287 
ãmp
 = 
	`SASR_W
(Åemp, 1 );

289 
	`as£π
(
exp⁄
 <= 5);

290 i‡(
ôe°
 =0Ë
exp⁄
++;

293 
	`as£π
(
exp⁄
 <= 6 &&Éxpon >= 0);

294 
ãmp
 = 
exp⁄
 + 5;

296 
	`as£π
(
ãmp
 <= 11 &&Åemp >= 0);

297 
xmaxc
 = 
	`gsm_add
–
	`SASR_W
(
xmax
, 
ãmp
), (
w‹d
Ë(
exp⁄
 << 3) );

303 
	`APCM_qu™tiz©i⁄_xmaxc_to_exp_m™t
–
xmaxc
, &
exp⁄
, &
m™t
 );

319 
	`as£π
–
exp⁄
 <= 4096 &&Éxpon >= -4096);

320 
	`as£π
–
m™t
 >= 0 && mant <= 7 );

322 
ãmp1
 = 6 - 
exp⁄
;

323 
ãmp2
 = 
gsm_NRFAC
[ 
m™t
 ];

325 
i
 = 0; i <= 12; i++) {

327 
	`as£π
(
ãmp1
 >= 0 &&Åemp1 < 16);

329 
ãmp
 = 
xM
[
i
] << 
ãmp1
;

330 
ãmp
 = 
	`GSM_MULT
–ãmp, 
ãmp2
 );

331 
ãmp
 = 
	`SASR_W
(temp, 12);

332 
xMc
[
i
] = 
ãmp
 + 4;

338 *
m™t_out
 = 
m™t
;

339 *
exp⁄_out
 = 
exp⁄
;

340 *
xmaxc_out
 = 
xmaxc
;

341 
	}
}

345 
	$APCM_övî£_qu™tiz©i⁄
 (

346 
w‹d
 * 
xMc
,

347 
w‹d
 
m™t
,

348 
w‹d
 
exp⁄
,

349 
w‹d
 * 
xMp
)

356 
i
;

357 
w‹d
 
ãmp
, 
ãmp1
, 
ãmp2
, 
ãmp3
;

359 
	`as£π
–
m™t
 >= 0 && mant <= 7 );

361 
ãmp1
 = 
gsm_FAC
[ 
m™t
 ];

362 
ãmp2
 = 
	`gsm_sub
–6, 
exp⁄
 );

363 
ãmp3
 = 
	`gsm_a¶
–1, 
	`gsm_sub
–
ãmp2
, 1 ));

365 
i
 = 13; i--;) {

367 
	`as£π
–*
xMc
 <= 7 && *xMc >= 0 );

370 
ãmp
 = (*
xMc
++ << 1) - 7;

371 
	`as£π
–
ãmp
 <= 7 &&Åemp >= -7 );

373 
ãmp
 <<= 12;

374 
ãmp
 = 
	`GSM_MULT_R
–
ãmp1
,Åemp );

375 
ãmp
 = 
	`GSM_ADD
–ãmp, 
ãmp3
 );

376 *
xMp
++ = 
	`gsm_a§
–
ãmp
, 
ãmp2
 );

378 
	}
}

382 
	$RPE_grid_posôi⁄ög
 (

383 
w‹d
 
Mc
,

384 
w‹d
 * 
xMp
,

385 
w‹d
 * 
ï


395 
i
 = 13;

397 
	`as£π
(0 <
Mc
 && Mc <= 3);

399 
Mc
) {

400 3: *
ï
++ = 0;

402 *
ï
++ = 0;

403 1: *
ï
++ = 0;

404 0: *
ï
++ = *
xMp
++;

405 } --
i
);

407 ++
Mc
 < 4Ë*
ï
++ = 0;

417 
	}
}

429 
	$Gsm_Upd©e_of_ªc⁄°ru˘ed_sh‹t_time_ªsiduÆ_sig«l
 (

430 
w‹d
 * 
dµ
,

431 
w‹d
 * 
ï
,

432 
w‹d
 * 
dp
)

434 
k
;

436 
k
 = 0; k <= 79; k++)

437 
dp
[ -120 + 
k
 ] = dp[ -80 + k ];

439 
k
 = 0; k <= 39; k++)

440 
dp
[ -40 + 
k
 ] = 
	`gsm_add
–
ï
[k], 
dµ
[k] );

441 
	}
}

444 
	$Gsm_RPE_Encodög
 (

447 
w‹d
 * 
e
,

448 
w‹d
 * 
xmaxc
,

449 
w‹d
 * 
Mc
,

450 
w‹d
 * 
xMc
)

452 
w‹d
 
x
[40];

453 
w‹d
 
xM
[13], 
xMp
[13];

454 
w‹d
 
m™t
, 
exp⁄
;

456 
	`Weightög_fûãr
(
e
, 
x
);

457 
	`RPE_grid_£À˘i⁄
(
x
, 
xM
, 
Mc
);

459 
	`APCM_qu™tiz©i⁄
–
xM
, 
xMc
, &
m™t
, &
exp⁄
, 
xmaxc
);

460 
	`APCM_övî£_qu™tiz©i⁄
–
xMc
, 
m™t
, 
exp⁄
, 
xMp
);

462 
	`RPE_grid_posôi⁄ög
–*
Mc
, 
xMp
, 
e
 );

464 
	}
}

466 
	$Gsm_RPE_Decodög
 (

469 
w‹d
 
xmax¸
,

470 
w‹d
 
M¸
,

471 
w‹d
 * 
xM¸
,

472 
w‹d
 * 
îp


475 
w‹d
 
exp⁄
, 
m™t
;

476 
w‹d
 
xMp
[ 13 ];

478 
	`APCM_qu™tiz©i⁄_xmaxc_to_exp_m™t
–
xmax¸
, &
exp⁄
, &
m™t
 );

479 
	`APCM_övî£_qu™tiz©i⁄
–
xM¸
, 
m™t
, 
exp⁄
, 
xMp
 );

480 
	`RPE_grid_posôi⁄ög
–
M¸
, 
xMp
, 
îp
 );

482 
	}
}

	@short_term.c

7 
	~<°dio.h
>

8 
	~<as£π.h
>

10 
	~"gsm610_¥iv.h
"

12 
	~"gsm.h
"

20 
	$Decodög_of_the_coded_Log_Aªa_R©ios
 (

21 
w‹d
 * 
LARc
,

22 
w‹d
 * 
LARµ
)

24 
w‹d
 
ãmp1
 ;

49 #unde‡
STEP


50 
	#STEP
–
B
, 
MIC
, 
INVA
 ) \

51 
ãmp1
 = 
	`GSM_ADD
–*
LARc
++, 
MIC
 ) << 10; \

52 
ãmp1
 = 
	`GSM_SUB
–ãmp1, 
B
 << 1 ); \

53 
ãmp1
 = 
	`GSM_MULT_R
–
INVA
,Åemp1 ); \

54 *
LARµ
++ = 
	`GSM_ADD
–
ãmp1
,Åemp1 );

	)

56 
	`STEP
( 0, -32, 13107 );

57 
	`STEP
( 0, -32, 13107 );

58 
	`STEP
( 2048, -16, 13107 );

59 
	`STEP
( -2560, -16, 13107 );

61 
	`STEP
( 94, -8, 19223 );

62 
	`STEP
( -1792, -8, 17476 );

63 
	`STEP
( -341, -4, 31454 );

64 
	`STEP
( -1144, -4, 29708 );

69 
	}
}

87 
	$C€fficõ¡s_0_12
 (

88 
w‹d
 * 
LARµ_j_1
,

89 
w‹d
 * 
LARµ_j
,

90 
w‹d
 * 
LARp
)

92 
i
;

94 
i
 = 1; i <8; i++, 
LARp
++, 
LARµ_j_1
++, 
LARµ_j
++) {

95 *
LARp
 = 
	`GSM_ADD
–
	`SASR_W
–*
LARµ_j_1
, 2 ), SASR_W–*
LARµ_j
, 2 ));

96 *
LARp
 = 
	`GSM_ADD
–*LARp, 
	`SASR_W
–*
LARµ_j_1
, 1));

98 
	}
}

100 
	$C€fficõ¡s_13_26
 (

101 
w‹d
 * 
LARµ_j_1
,

102 
w‹d
 * 
LARµ_j
,

103 
w‹d
 * 
LARp
)

105 
i
;

106 
i
 = 1; i <8; i++, 
LARµ_j_1
++, 
LARµ_j
++, 
LARp
++) {

107 *
LARp
 = 
	`GSM_ADD
–
	`SASR_W
–*
LARµ_j_1
, 1), SASR_W–*
LARµ_j
, 1 ));

109 
	}
}

111 
	$C€fficõ¡s_27_39
 (

112 
w‹d
 * 
LARµ_j_1
,

113 
w‹d
 * 
LARµ_j
,

114 
w‹d
 * 
LARp
)

116 
i
;

118 
i
 = 1; i <8; i++, 
LARµ_j_1
++, 
LARµ_j
++, 
LARp
++) {

119 *
LARp
 = 
	`GSM_ADD
–
	`SASR_W
–*
LARµ_j_1
, 2 ), SASR_W–*
LARµ_j
, 2 ));

120 *
LARp
 = 
	`GSM_ADD
–*LARp, 
	`SASR_W
–*
LARµ_j
, 1 ));

122 
	}
}

125 
	$C€fficõ¡s_40_159
 (

126 
w‹d
 * 
LARµ_j
,

127 
w‹d
 * 
LARp
)

129 
i
;

131 
i
 = 1; i <8; i++, 
LARp
++, 
LARµ_j
++)

132 *
LARp
 = *
LARµ_j
;

133 
	}
}

137 
	$LARp_to_Ω
 (

138 
w‹d
 * 
LARp
)

145 
i
;

146 
w‹d
 
ãmp
;

148 
i
 = 1; i <8; i++, 
LARp
++) {

159 i‡(*
LARp
 < 0) {

160 
ãmp
 = *
LARp
 =
MIN_WORD
 ? 
MAX_WORD
 : -(*LARp);

161 *
LARp
 = - ((
ãmp
 < 11059) ?Åemp << 1

162 : ((
ãmp
 < 20070) ?Åemp + 11059

163 : 
	`GSM_ADD
–(
w‹d
Ë(
ãmp
 >> 2), (word) 26112 )));

165 
ãmp
 = *
LARp
;

166 *
LARp
 = (
ãmp
 < 11059) ?Åemp << 1

167 : ((
ãmp
 < 20070) ?Åemp + 11059

168 : 
	`GSM_ADD
–(
w‹d
Ë(
ãmp
 >> 2), (word) 26112 ));

171 
	}
}

175 
	$Sh‹t_ãrm_™Æysis_fûãrög
 (

176 
gsm_°©e
 * 
S
,

177 
w‹d
 * 
Ω
,

178 
k_n
,

179 
w‹d
 * 
s


192 
w‹d
 * 
u
 = 
S
->u;

193 
i
;

194 
w‹d
 
di
, 
zzz
, 
ui
, 
ßv
, 
Ωi
;

196 ; 
k_n
--; 
s
++) {

198 
di
 = 
ßv
 = *
s
;

200 
i
 = 0; i < 8; i++) {

202 
ui
 = 
u
[
i
];

203 
Ωi
 = 
Ω
[
i
];

204 
u
[
i
] = 
ßv
;

206 
zzz
 = 
	`GSM_MULT_R
(
Ωi
, 
di
);

207 
ßv
 = 
	`GSM_ADD
–
ui
, 
zzz
);

209 
zzz
 = 
	`GSM_MULT_R
(
Ωi
, 
ui
);

210 
di
 = 
	`GSM_ADD
–di, 
zzz
 );

213 *
s
 = 
di
;

215 
	}
}

217 #i‡
deföed
(
USE_FLOAT_MUL
Ë&& deföed(
FAST
)

219 
	$Fa°_Sh‹t_ãrm_™Æysis_fûãrög
 (

220 
gsm_°©e
 * 
S
,

221 
w‹d
 * 
Ω
,

222 
k_n
,

223 
w‹d
 * 
s


226 
w‹d
 * 
u
 = 
S
->u;

227 
i
;

229 
uf
[8],

230 
Ωf
[8];

232 
sˇÀf
 = 3.0517578125e-5;

233 
ßv
, 
di
, 
ãmp
;

235 
i
 = 0; i < 8; ++i) {

236 
uf
[
i
] = 
u
[i];

237 
Ωf
[
i
] = 
Ω
[i] * 
sˇÀf
;

239 ; 
k_n
--; 
s
++) {

240 
ßv
 = 
di
 = *
s
;

241 
i
 = 0; i < 8; ++i) {

242 
Ωfi
 = 
Ωf
[
i
];

243 
ufi
 = 
uf
[
i
];

245 
uf
[
i
] = 
ßv
;

246 
ãmp
 = 
Ωfi
 * 
di
 + 
ufi
;

247 
di
 +
Ωfi
 * 
ufi
;

248 
ßv
 = 
ãmp
;

250 *
s
 = 
di
;

252 
i
 = 0; i < 8; ++iË
u
[i] = 
uf
[i];

253 
	}
}

256 
	$Sh‹t_ãrm_sy¡hesis_fûãrög
 (

257 
gsm_°©e
 * 
S
,

258 
w‹d
 * 
ºp
,

259 
k
,

260 
w‹d
 * 
wt
,

261 
w‹d
 * 
§


264 
w‹d
 * 
v
 = 
S
->v;

265 
i
;

266 
w‹d
 
§i
, 
tmp1
, 
tmp2
;

268 
k
--) {

269 
§i
 = *
wt
++;

270 
i
 = 8; i--;) {

274 
tmp1
 = 
ºp
[
i
];

275 
tmp2
 = 
v
[
i
];

276 
tmp2
 = ( 
tmp1
 =
MIN_WORD
 &&Åmp2 == MIN_WORD

277 ? 
MAX_WORD


278 : 0x0FFFF & (–(
l⁄gw‹d
)
tmp1
 * (l⁄gw‹d)
tmp2


281 
§i
 = 
	`GSM_SUB
–§i, 
tmp2
 );

285 
tmp1
 = (Åmp1 =
MIN_WORD
 && 
§i
 == MIN_WORD

286 ? 
MAX_WORD


287 : 0x0FFFF & (–(
l⁄gw‹d
)
tmp1
 * (l⁄gw‹d)
§i


290 
v
[
i
+1] = 
	`GSM_ADD
–v[i], 
tmp1
);

292 *
§
++ = 
v
[0] = 
§i
;

294 
	}
}

297 #i‡
deföed
(
FAST
Ë&& deföed(
USE_FLOAT_MUL
)

299 
	$Fa°_Sh‹t_ãrm_sy¡hesis_fûãrög
 (

300 
gsm_°©e
 * 
S
,

301 
w‹d
 * 
ºp
,

302 
k
,

303 
w‹d
 * 
wt
,

304 
w‹d
 * 
§


307 
w‹d
 * 
v
 = 
S
->v;

308 
i
;

310 
va
[9], 
º∑
[8];

311 
sˇÀf
 = 3.0517578125e-5, 
ãmp
;

313 
i
 = 0; i < 8; ++i) {

314 
va
[
i
] = 
v
[i];

315 
º∑
[
i
] = ()
ºp
[i] * 
sˇÀf
;

317 
k
--) {

318 
§i
 = *
wt
++;

319 
i
 = 8; i--;) {

320 
§i
 -
º∑
[
i
] * 
va
[i];

321 i‡(
§i
 < -32768.) sri = -32768.;

322 i‡(
§i
 > 32767.) sri = 32767.;

324 
ãmp
 = 
va
[
i
] + 
º∑
[i] * 
§i
;

325 i‡(
ãmp
 < -32768.)Åemp = -32768.;

326 i‡(
ãmp
 > 32767.)Åemp = 32767.;

327 
va
[
i
+1] = 
ãmp
;

329 *
§
++ = 
va
[0] = 
§i
;

331 
i
 = 0; i < 9; ++iË
v
[i] = 
va
[i];

332 
	}
}

336 
	$Gsm_Sh‹t_Tîm_A«lysis_Fûãr
 (

338 
gsm_°©e
 * 
S
,

340 
w‹d
 * 
LARc
,

341 
w‹d
 * 
s


344 
w‹d
 * 
LARµ_j
 = 
S
->
LARµ
[ S->
j
 ];

345 
w‹d
 * 
LARµ_j_1
 = 
S
->
LARµ
[ S->
j
 ^= 1 ];

347 
w‹d
 
LARp
[8];

349 #unde‡
FILTER


350 #i‡ 
	`deföed
(
FAST
Ë&& deföed(
USE_FLOAT_MUL
)

351 
	#FILTER
 (* (
S
->
Á°
 \

352 ? 
Fa°_Sh‹t_ãrm_™Æysis_fûãrög
 \

353 : 
Sh‹t_ãrm_™Æysis_fûãrög
 ))

	)

356 
	#FILTER
 
Sh‹t_ãrm_™Æysis_fûãrög


	)

359 
	`Decodög_of_the_coded_Log_Aªa_R©ios
–
LARc
, 
LARµ_j
 );

361 
	`C€fficõ¡s_0_12
–
LARµ_j_1
, 
LARµ_j
, 
LARp
 );

362 
	`LARp_to_Ω
–
LARp
 );

363 
	`FILTER
–
S
, 
LARp
, 13, 
s
);

365 
	`C€fficõ¡s_13_26
–
LARµ_j_1
, 
LARµ_j
, 
LARp
);

366 
	`LARp_to_Ω
–
LARp
 );

367 
	`FILTER
–
S
, 
LARp
, 14, 
s
 + 13);

369 
	`C€fficõ¡s_27_39
–
LARµ_j_1
, 
LARµ_j
, 
LARp
);

370 
	`LARp_to_Ω
–
LARp
 );

371 
	`FILTER
–
S
, 
LARp
, 13, 
s
 + 27);

373 
	`C€fficõ¡s_40_159
–
LARµ_j
, 
LARp
);

374 
	`LARp_to_Ω
–
LARp
 );

375 
	`FILTER
–
S
, 
LARp
, 120, 
s
 + 40);

376 
	}
}

378 
	$Gsm_Sh‹t_Tîm_Sy¡hesis_Fûãr
 (

379 
gsm_°©e
 * 
S
,

381 
w‹d
 * 
LAR¸
,

382 
w‹d
 * 
wt
,

384 
w‹d
 * 
s


387 
w‹d
 * 
LARµ_j
 = 
S
->
LARµ
[ S->
j
 ];

388 
w‹d
 * 
LARµ_j_1
 = 
S
->
LARµ
[ S->
j
 ^=1 ];

390 
w‹d
 
LARp
[8];

392 #unde‡
FILTER


393 #i‡ 
	`deföed
(
FAST
Ë&& deföed(
USE_FLOAT_MUL
)

395 
	#FILTER
 (* (
S
->
Á°
 \

396 ? 
Fa°_Sh‹t_ãrm_sy¡hesis_fûãrög
 \

397 : 
Sh‹t_ãrm_sy¡hesis_fûãrög
 ))

	)

399 
	#FILTER
 
Sh‹t_ãrm_sy¡hesis_fûãrög


	)

402 
	`Decodög_of_the_coded_Log_Aªa_R©ios
–
LAR¸
, 
LARµ_j
 );

404 
	`C€fficõ¡s_0_12
–
LARµ_j_1
, 
LARµ_j
, 
LARp
 );

405 
	`LARp_to_Ω
–
LARp
 );

406 
	`FILTER
–
S
, 
LARp
, 13, 
wt
, 
s
 );

408 
	`C€fficõ¡s_13_26
–
LARµ_j_1
, 
LARµ_j
, 
LARp
);

409 
	`LARp_to_Ω
–
LARp
 );

410 
	`FILTER
–
S
, 
LARp
, 14, 
wt
 + 13, 
s
 + 13 );

412 
	`C€fficõ¡s_27_39
–
LARµ_j_1
, 
LARµ_j
, 
LARp
);

413 
	`LARp_to_Ω
–
LARp
 );

414 
	`FILTER
–
S
, 
LARp
, 13, 
wt
 + 27, 
s
 + 27 );

416 
	`C€fficõ¡s_40_159
–
LARµ_j
, 
LARp
 );

417 
	`LARp_to_Ω
–
LARp
 );

418 
	`FILTER
(
S
, 
LARp
, 120, 
wt
 + 40, 
s
 + 40);

419 
	}
}

	@table.c

16 
	#GSM_TABLE_C


	)

17 
	~"gsm610_¥iv.h
"

18 
	~"gsm.h
"

23 
w‹d
 
	ggsm_A
[8] = {20480, 20480, 20480, 20480, 13964, 15360, 8534, 9036};

24 
w‹d
 
	ggsm_B
[8] = { 0, 0, 2048, -2560, 94, -1792, -341, -1144};

25 
w‹d
 
	ggsm_MIC
[8] = { -32, -32, -16, -16, -8, -8, -4, -4 };

26 
w‹d
 
	ggsm_MAC
[8] = { 31, 31, 15, 15, 7, 7, 3, 3 };

31 
w‹d
 
	ggsm_INVA
[8]={ 13107, 13107, 13107, 13107, 19223, 17476, 31454, 29708 };

37 
w‹d
 
	ggsm_DLB
[4] = { 6554, 16384, 26214, 32767 };

43 
w‹d
 
	ggsm_QLB
[4] = { 3277, 11469, 21299, 32767 };

49 
w‹d
 
	ggsm_H
[11] = {-134, -374, 0, 2054, 5741, 8192, 5741, 2054, 0, -374, -134 };

55 
w‹d
 
	ggsm_NRFAC
[8] = { 29128, 26215, 23832, 21846, 20165, 18725, 17476, 16384 };

61 
w‹d
 
	ggsm_FAC
[8] = { 18431, 20479, 22527, 24575, 26623, 28671, 30719, 32767 };

	@
1
.
0
17
175
add.c
code.c
config.h
decode.c
gsm.h
gsm610_priv.h
gsm_create.c
gsm_decode.c
gsm_destroy.c
gsm_encode.c
gsm_option.c
long_term.c
lpc.c
preprocess.c
rpe.c
short_term.c
table.c
